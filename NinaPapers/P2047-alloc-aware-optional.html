<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>An allocator-aware optional type</title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2113.3">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 12.0px Times; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p4 {margin: 0.0px 0.0px 6.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p7 {margin: 0.0px 0.0px 12.0px 0.0px; text-align: justify; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p9 {margin: 0.0px 0.0px 12.0px 0.0px; text-align: justify; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p14 {margin: 0.0px 0.0px 14.0px 0.0px; text-align: justify; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 18.0px}
    p.p15 {margin: 0.0px 0.0px 12.0px 0.0px; text-align: justify; font: 12.0px Courier; color: #000000; -webkit-text-stroke: #000000}
    p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #0a4d69; -webkit-text-stroke: #0a4d69}
    p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; color: #0f7001; -webkit-text-stroke: #0f7001}
    p.p20 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000}
    p.p21 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; color: #0f7001; -webkit-text-stroke: #0f7001; background-color: #21ff06}
    p.p22 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000; background-color: #21ff06}
    p.p23 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p24 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #0a4d69; -webkit-text-stroke: #0a4d69; background-color: #21ff06}
    p.p25 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #0000e9; -webkit-text-stroke: #0000e9; background-color: #21ff06}
    p.p26 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p27 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #0a4d69; background-color: #21ff06}
    p.p28 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; background-color: #21ff06}
    p.p29 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p30 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #9d0612; -webkit-text-stroke: #9d0612; min-height: 14.0px}
    p.p31 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #21ff06}
    p.p32 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #0d3c56; background-color: #21ff06}
    p.p33 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p34 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #9d0612; -webkit-text-stroke: #9d0612}
    p.p36 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier; color: #000000; -webkit-text-stroke: #000000}
    p.p37 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p38 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #93ff8f}
    p.p39 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Courier; color: #000000; -webkit-text-stroke: #000000}
    p.p40 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p41 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p42 {margin: 0.0px 0.0px 0.0px 0.0px; font: 15.6px Times; color: #0000e9; -webkit-text-stroke: #0000e9; min-height: 19.0px}
    p.p45 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #0a4d69; -webkit-text-stroke: #0a4d69}
    p.p46 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; -webkit-text-stroke: #000000}
    p.p47 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p48 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p49 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; color: #000000; -webkit-text-stroke: #136002; background-color: #000000; background-color: rgba(0, 0, 0, 0)}
    p.p50 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #000000; background-color: rgba(0, 0, 0, 0)}
    p.p51 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #000000; background-color: #000000; background-color: rgba(0, 0, 0, 0)}
    p.p52 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #0a4d69; -webkit-text-stroke: #0a4d69; background-color: #000000; background-color: rgba(0, 0, 0, 0)}
    p.p53 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; -webkit-text-stroke: #000000; background-color: #000000; background-color: rgba(0, 0, 0, 0)}
    p.p54 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000; background-color: #000000; background-color: rgba(0, 0, 0, 0); min-height: 14.0px}
    p.p55 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; background-color: #000000; background-color: rgba(0, 0, 0, 0)}
    p.p56 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; -webkit-text-stroke: #0a4d69}
    p.p57 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times}
    p.p58 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #2cff0b; min-height: 14.0px}
    p.p59 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; color: #000000; -webkit-text-stroke: #0000e3; background-color: #2cff0b}
    p.p60 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #9d0612; -webkit-text-stroke: #9d0612}
    p.p61 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; -webkit-text-stroke: #000000}
    p.p62 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p63 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #000000; background-color: rgba(0, 0, 0, 0)}
    p.p64 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p66 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; -webkit-text-stroke: #000000; background-color: #21ff06}
    p.p67 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; -webkit-text-stroke: #000000; background-color: #21ff06; min-height: 16.0px}
    p.p68 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #0a4d69; -webkit-text-stroke: #0a4d69; background-color: #21ff06}
    p.p69 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; -webkit-text-stroke: #000000; background-color: #21ff06}
    p.p70 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 10.0px Times; color: #0000e9; -webkit-text-stroke: #0000e9; background-color: #21ff06; min-height: 13.0px}
    p.p71 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #21ff06}
    p.p72 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 10.0px 'Apple Color Emoji'; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p73 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; background-color: #21ff06}
    p.p74 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; color: #000000; -webkit-text-stroke: #000000}
    p.p75 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p76 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 10.0px Times; color: #0000e9; -webkit-text-stroke: #0000e9; min-height: 13.0px}
    p.p77 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; color: #000000; background-color: #21ff06}
    p.p78 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 10.0px Times; color: #0000e9; -webkit-text-stroke: #0000e9; min-height: 13.0px}
    p.p79 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #0a4d69; -webkit-text-stroke: #0a4d69; min-height: 14.0px}
    p.p80 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; -webkit-text-stroke: #0a4d69; background-color: #21ff06}
    p.p81 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times}
    p.p82 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #000000; background-color: #21ff06}
    p.p83 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #0a4d69; background-color: #21ff06}
    p.p85 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; -webkit-text-stroke: #000000}
    p.p86 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #93ff8f; min-height: 14.0px}
    p.p87 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; min-height: 16.0px}
    p.p88 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 9.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p89 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 13.3px Times; -webkit-text-stroke: #000000}
    p.p90 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: center; font: 12.0px Times; -webkit-text-stroke: #000000; min-height: 14.0px}
    p.p92 {margin: 0.0px 0.0px 13.3px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #2cff0b}
    p.p93 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #2cff0b}
    p.p94 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; color: #000000; -webkit-text-stroke: #000000; background-color: #2cff0b}
    p.p95 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; -webkit-text-stroke: #000000; background-color: #000000; background-color: rgba(0, 0, 0, 0); min-height: 16.0px}
    p.p96 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; -webkit-text-stroke: #000000; background-color: #000000; background-color: rgba(0, 0, 0, 0); min-height: 14.0px}
    p.p97 {margin: 0.0px 0.0px 0.0px 0.0px; font: 15.6px Times; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p98 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 10.0px Menlo; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p99 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p101 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 15.6px Times; color: #0000e9; -webkit-text-stroke: #0000e9}
    p.p103 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #0000e9; -webkit-text-stroke: #0000e9; background-color: #21ff06}
    p.p104 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px Times; -webkit-text-stroke: #000000; background-color: #21ff06}
    li.li11 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    li.li91 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: right; font: 13.3px Times; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
    span.s2 {text-decoration: underline ; font-kerning: none}
    span.s3 {font: 12.0px Courier; font-kerning: none}
    span.s4 {-webkit-text-stroke: 0px #000000}
    span.s5 {font: 14.0px Courier; font-kerning: none}
    span.s6 {font: 14.0px Times; font-kerning: none}
    span.s7 {font: 12.0px Times; font-kerning: none}
    span.s8 {font: 18.0px Times; font-kerning: none; color: #000000}
    span.s9 {font-kerning: none; color: #0000e9; -webkit-text-stroke: 0px #0000e9}
    span.s10 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s11 {font-kerning: none; color: #9d0612; -webkit-text-stroke: 0px #9d0612}
    span.s12 {font: 12.0px Times; font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s13 {font: 13.3px Times; font-kerning: none; color: #0000e9; -webkit-text-stroke: 0px #0000e9}
    span.s14 {font-kerning: none; color: #440045; -webkit-text-stroke: 0px #440045}
    span.s15 {font-kerning: none; color: #0a4d69; -webkit-text-stroke: 0px #0a4d69}
    span.s16 {font: 13.3px Times; font-kerning: none; color: #0f7001; -webkit-text-stroke: 0px #0f7001}
    span.s17 {font-kerning: none; background-color: #21ff06}
    span.s18 {font-kerning: none; color: #0a4d69; background-color: #21ff06; -webkit-text-stroke: 0px #0a4d69}
    span.s19 {font-kerning: none; -webkit-text-stroke: 0px #0000e9}
    span.s20 {font-kerning: none; color: #440045; background-color: #21ff06; -webkit-text-stroke: 0px #440045}
    span.s21 {font-kerning: none; color: #9d0612; background-color: #21ff06; -webkit-text-stroke: 0px #9d0612}
    span.s22 {font-kerning: none; -webkit-text-stroke: 0px #000000}
    span.s23 {font-kerning: none; color: #0a4d69}
    span.s24 {font-kerning: none; background-color: #21ff06; -webkit-text-stroke: 0px #000000}
    span.s25 {font-kerning: none; color: #0f7001; -webkit-text-stroke: 0px #0f7001}
    span.s26 {font: 12.0px Times; font-kerning: none; color: #0f7001; -webkit-text-stroke: 0px #0f7001}
    span.s27 {font-kerning: none; -webkit-text-stroke: 0px #340035}
    span.s28 {text-decoration: underline ; font-kerning: none; background-color: #93ff8f}
    span.s29 {font: 12.0px Courier; text-decoration: underline ; font-kerning: none; background-color: #93ff8f}
    span.s30 {font: 12.0px Times; text-decoration: underline ; font-kerning: none; background-color: #93ff8f}
    span.s31 {font: 12.0px Courier; text-decoration: underline ; font-kerning: none}
    span.s32 {font-kerning: none; color: #000000}
    span.s33 {font-kerning: none; -webkit-text-stroke: 0px #9d0612}
    span.s34 {font-kerning: none; -webkit-text-stroke: 0px #136002}
    span.s35 {text-decoration: underline ; font-kerning: none; color: #0000e9; -webkit-text-stroke: 0px #0000e3}
    span.s36 {font-kerning: none; background-color: #2cff0b}
    span.s37 {font-kerning: none; background-color: #2cff0b; -webkit-text-stroke: 0px #890010}
    span.s38 {font-kerning: none; background-color: #2cff0b; -webkit-text-stroke: 0px #0d3c56}
    span.s39 {font: 13.3px Times; font-kerning: none; color: #000000}
    span.s40 {font: 13.3px Times; font-kerning: none}
    span.s41 {font: 13.3px Times; font-kerning: none; color: #440045; -webkit-text-stroke: 0px #440045}
    span.s42 {font: 13.3px Times; font-kerning: none; -webkit-text-stroke: 0px #000000}
    span.s43 {font-kerning: none; color: #8c550a; -webkit-text-stroke: 0px #8c550a}
    span.s44 {font-kerning: none; color: #0000ff; -webkit-text-stroke: 0px #0000ff}
    span.s45 {font: 13.3px Times; font-kerning: none; color: #8c550a; -webkit-text-stroke: 0px #8c550a}
    span.s46 {font: 10.0px 'Apple Color Emoji'; font-kerning: none; color: #0000e9; -webkit-text-stroke: 0px #0000e9}
    span.s47 {font: 13.3px Times; font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s48 {font-kerning: none; -webkit-text-stroke: 0px #890010}
    span.s49 {font: 13.3px Times; font-kerning: none; background-color: #21ff06; -webkit-text-stroke: 0px #000000}
    span.s50 {font: 13.3px Times; font-kerning: none; color: #000000; background-color: #21ff06}
    span.s51 {font: 13.3px Times; font-kerning: none; color: #9d0612; -webkit-text-stroke: 0px #9d0612}
    span.s52 {font-kerning: none; color: #9d0612}
    span.s53 {font-kerning: none; color: #440045}
    span.s54 {font-kerning: none; color: #0a4d69; background-color: #21ff06}
    span.s55 {font-kerning: none; color: #9d0612; background-color: #21ff06}
    span.s56 {font-kerning: none; color: #000000; background-color: #21ff06}
    span.s57 {font-kerning: none; color: #440045; background-color: #21ff06}
    span.s58 {font-kerning: none; color: #8c550a; background-color: #21ff06; -webkit-text-stroke: 0px #8c550a}
    span.s59 {font-kerning: none; color: #0a4d69; background-color: rgba(0, 0, 0, 0); -webkit-text-stroke: 0px #0a4d69}
    span.s60 {font-kerning: none; background-color: rgba(0, 0, 0, 0); -webkit-text-stroke: 0px #000000}
    span.s61 {font-kerning: none; color: #440045; background-color: rgba(0, 0, 0, 0)}
    span.s62 {font-kerning: none; background-color: rgba(0, 0, 0, 0)}
    span.s63 {font-kerning: none; color: #440045; background-color: rgba(0, 0, 0, 0); -webkit-text-stroke: 0px #440045}
    span.s64 {font-kerning: none; color: #9d0612; background-color: rgba(0, 0, 0, 0); -webkit-text-stroke: 0px #9d0612}
    span.s65 {font: 9.3px Times; font-kerning: none; color: #0000e9; -webkit-text-stroke: 0px #0000e9}
    span.s66 {font: 13.3px Times; font-kerning: none; -webkit-text-stroke: 0px #0000e9}
    span.s67 {font: 13.3px 'Lucida Grande'; font-kerning: none}
    span.s68 {font: 9.3px Times; color: #0000e9; -webkit-text-stroke: 0px #000000}
    span.s69 {font: 13.3px Times; font-kerning: none; -webkit-text-stroke: 0px #0000e3}
    span.s70 {font-kerning: none; -webkit-text-stroke: 0px #0d3c56}
    span.s71 {font: 15.6px Times; font-kerning: none; color: #0000e9; -webkit-text-stroke: 0px #0000e9}
    span.s72 {font: 15.6px Times; font-kerning: none}
    span.s73 {font: 12.0px Times; font-kerning: none; color: #440045; -webkit-text-stroke: 0px #000000}
    span.s74 {font: 12.0px Times; font-kerning: none; -webkit-text-stroke: 0px #000000}
    span.Apple-tab-span {white-space:pre}
    table.t1 {border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d}
    table.t2 {margin: 9.3px 83.1px 0.0px 83.1px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #000000 #000000 #000000 #000000; border-collapse: collapse}
    td.td1 {width: 40.0px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td2 {width: 482.5px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td3 {width: 485.5px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td4 {width: 485.8px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td5 {width: 73.8px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td6 {width: 145.5px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td7 {width: 367.7px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td8 {width: 73.4px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td9 {width: 144.7px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td10 {width: 368.9px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td11 {width: 68.3px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td12 {width: 135.0px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td13 {width: 383.8px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td14 {width: 73.6px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td15 {width: 145.1px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td16 {width: 368.3px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td17 {width: 68.6px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td18 {width: 135.7px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td19 {width: 382.7px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td20 {width: 40.7px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td21 {width: 273.2px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td22 {width: 75.0px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td23 {width: 494.0px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td24 {width: 439.0px; margin: 0.5px 0.5px 0.5px 0.5px; border-style: solid; border-width: 1.0px 1.0px 1.0px 1.0px; border-color: #6d6d6d #6d6d6d #6d6d6d #6d6d6d; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td25 {width: 135.5px; padding: 0.0px 0.0px 0.0px 1.0px}
    td.td26 {border-style: solid; border-width: 0.0px 0.0px 0.0px 1.0px; border-color: #000000 #000000 #000000 #000000; padding: 0.0px 0.0px 0.0px 1.0px}
    td.td27 {width: 172.8px; border-style: solid; border-width: 1.0px 0.0px 0.0px 1.0px; border-color: #000000 #000000 #000000 #000000; padding: 1.0px 10.7px 1.0px 10.7px}
    td.td28 {width: 115.2px; padding: 1.0px 10.7px 1.0px 10.7px}
    td.td29 {width: 172.8px; border-style: solid; border-width: 0.0px 0.0px 0.0px 1.0px; border-color: #000000 #000000 #000000 #000000; padding: 1.0px 10.7px 1.0px 10.7px}
    td.td30 {width: 115.2px; border-style: solid; border-width: 1.0px 0.0px 0.0px 0.0px; border-color: #000000 #000000 #000000 #000000; padding: 1.0px 10.7px 1.0px 10.7px}
    ol.ol1 {list-style-type: decimal}
    ul.ul1 {list-style-type: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1"><i>Document number: P2047R7<span class="Apple-converted-space"> </span></i></span></p>
<p class="p1"><span class="s1"><i>Audience: LEWG<span class="Apple-converted-space"> </span></i></span></p>
<p class="p2"><span class="s1"><i></i></span><br></p>
<p class="p3"><span class="s2"><a href="mailto:ville.voutilainen@gmail.com"><i>Ville Voutilainen</i></a></span></p>
<p class="p3"><span class="s2"><a href="mailto:dinka.ranns@gmail.com"><i>Nina Dinka Ranns</i></a></span></p>
<p class="p3"><span class="s2"><a href="mailto:phalpern@halpernwightsoftware.com"><i>Pablo Halpern</i></a></span></p>
<p class="p1"><span class="s1"><i>2024-xx-xx</i></span></p>
<p class="p4"><span class="s1"></span><br></p>
<h1 style="margin: 0.0px 0.0px 16.1px 0.0px; text-align: center; font: 24.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>An allocator-aware optional type</b></span></h1>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Abstract</b></span></h2>
<p class="p7"><span class="s1">Library types that can potentially hold <i>allocator-aware (AA)</i> objects should, themselves, be allocator-aware. A PMR container, for example, depends on AA types following a known AA protocol so that it (the container) can uniformly manage its memory. Even types that don't manage their own memory, such as </span><span class="s3">tuple</span><span class="s1">, follow the AA rules when they hold one more more AA elements. (A special case is </span><span class="s3">pair</span><span class="s1">, which is not actually AA but effectively follows the rules through special handling in <i>uses-allocator construction</i>.)<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">The current definition of </span><span class="s3">std::optional</span><span class="s1"> does not follow the rules for an AA type, even when holding an AA value. This limitation makes </span><span class="s3">std::optional</span><span class="s1"> unsuitable for storage in an AA container when memory allocation customization is needed.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">In this paper, we propose a new, allocator-aware </span><span class="s3">std::basic_optional</span><span class="s1"> usable as a container element type of allocator aware containers, and in any other context where allocator propagation is expected. This new type would not replace the current </span><span class="s3">std::optional</span><span class="s1"> as the desired behaviour is not compatible with how </span><span class="s3">std::optional</span><span class="s1"> handles allocator aware types at the moment. We do propose having a special treatement for </span><span class="s3">std::basic_optional</span><span class="s1"> and </span><span class="s3">std::optional</span><span class="s1"> that allows for certain implicit conversions between the two types. We also propose an </span><span class="s3">std::pmr::optional</span><span class="s1"> type which is a specialisation of </span><span class="s3">std::basic_optional</span><span class="s1"> for </span><span class="s3">std::pmr::polymorphic_allocator&lt;&gt;</span><span class="s1">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">This is a complete proposal with formal wording.</span></p>
<p class="p9"><span class="s1"></span><br></p>
<p class="p7"><span class="s1"><br>
change history : <br>
- replaced </span><span class="s3">alloc_optional</span><span class="s1"> with additional overloads of </span><span class="s3">make_optional</span><span class="s1"> that take an </span><span class="s3">allocator_arg_t</span><span class="s1"> : it was observed that </span><span class="s3">alloc_optional</span><span class="s1"> doesn't actually do any allocation, and that the name is not appropriate <br>
- fixed the order of arguments in the <i>Returns</i> clause of what used to be </span><span class="s3">alloc_optional</span><span class="s1"> <br>
- adjusted for LWG 2833 <br>
- added discussion on deduction guides <br>
- removed mentions of using a type alias since the type alias approach has proven to be problematic <br>
- modified the specification of std::pmr::optional to cover both AA and non AA types <br>
- added CTAD specification <br>
- modified the specification of </span><span class="s3">std::pmr::optional</span><span class="s1"> to be expressed in terms of </span><span class="s3">std::pmr::polymorphic_allocator&lt;&gt;</span><span class="s1">, as opposed to </span><span class="s3">std::pmr::memory_resource</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p8"><span class="s1">- moved </span><span class="s3">std::pmr::optional</span><span class="s1"> to </span><span class="s3">optional</span><span class="s1"> header as discussed in the reflector discussion<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- added request for discussion on making </span><span class="s3">std::pmr::optional</span><span class="s1"> a more allocator generic type.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- added free swap function to be in line with P0178<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">R3:<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- replaced instances of <i>M_alloc</i> with <i>alloc</i><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- clarified pmr::optional constructor descriptions to call out uses-allocator construction<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- expanded </span><span class="s3">basic_optional</span><span class="s1"> discussion<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">R4:<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- switched to </span><span class="s3">std::pmr::optional</span><span class="s1"> being a specialisation of </span><span class="s3">std::basic_optional</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- modified the wording to cover </span><span class="s3">std::basic_optional</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">R5:<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- various clean up of proposed wording<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- setting the default allocator to be </span><span class="s3">remove_cv_t</span><span class="s1"> version of value_type<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- removed make facilities<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">R6:<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- cleaning up html format<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- clean up of proposed wording<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">R7:<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s1">- added design considerations for special member functions and swap</span></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Motivation and Proposal Summary</b></span></h2>
<p class="p7"><span class="s1">C++ has been moving towards a consistent PMR allocator model whereby <i>allocator-aware (AA)</i> types adhere to a few rules:<span class="Apple-converted-space"> </span></span></p>
<ol class="ol1">
  <li class="li11"><span class="s4"></span><span class="s1">Once constructed, an object's allocator never changes.</span></li>
  <li class="li11"><span class="s4"></span><span class="s1">The object's constructors all follow one of two argument protocols so that they work with <i>uses-allocator construction</i> and thus can be inserted as container elements using the container's allocator.</span></li>
  <li class="li11"><span class="s4"></span><span class="s1">An object that can contain an AA element of user-specified type should itself be AA and use its allocator to initialize its AA subobjects.</span></li>
</ol>
<p class="p7"><span class="s1">The current </span><span class="s3">std::optional</span><span class="s1"> does not follow the above rules. When disengaged, it forgets its allocator, violating the first rule; its constructors don't follow the AA protocols, so containers cannot pass their allocators to </span><span class="s3">optional</span><span class="s1"> elements; and it does not hold on an allocator by which it can initialize it's contained object. As a result, </span><span class="s3">std::optional</span><span class="s1"> is not a good fit for situations where allocators are used. A </span><span class="s3">std::pmr::vector&lt;optional&lt;std::pmr::string&gt;&gt;</span><span class="s1">, for example, cannot ensure that all of strings within it use the same allocator, violating a key invariant of PMR containers. If one of the elements of the vector became disengaged and re-engaged, for example, the allocator for that one element could change.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">The </span><span class="s3">basic_optional</span><span class="s1"> class template proposed here properly adheres to the rules of an AA type when instantiated with an AA value type. It holds a copy of the allocator used to construct it, even when disengaged, and uses that allocator to construct its element when re-engaged. This allows containers of </span><span class="s3">basic_optional</span><span class="s1"> objects to correctly manage their memory. Fruthermore, to support allocators with different allocator traits to the PMR allocator model, </span><span class="s3">basic_optional</span><span class="s1"> also uses allocator propagation traits to determine the behaviour of optional object with regards to allocator propagation.<span class="Apple-converted-space"> </span></span></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Design decisions:</b></span></h2>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>default constructor<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">Default constructor always does uses_allocator construction in case the default allocator construction produces different allocators each time. Possible optimisation opportunity for allocators which have is_always_equal set to true, but no benefit in triviality or constexpr - uses_allocator construction will be constexpr if it can be constexpr either way.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">No conditional triviality of the default constructor - the internal state needs to be initialised. This is the same as in std::optional.</span></p>
<p class="p7"><span class="s1">Possible additional consideration is for basic_optional where the value type is not allocator aware - such a basic_variant constexpr considerations would only depend on the constexpr construction of the 0th alternative. We do not propose standardising such optimisations.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>copy constructor<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">Copy construction does not do uses_allocator construction - the value type is expected to behave according to the traits and get the right allocator. This allows for triviality if allocator is always equal and the constructed type can be trivially copy constructed. If allocator is not always equal, we need to check the traits to get the right allocator and that initialisation can not be trivial. Possible additional consideration is for basic_optional where the value type is not allocator aware - such a basic_optional does not need to store the allocator and triviality only depends on the triviality of the value type. This proposal does not consider such optimisation.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>move constructor<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">Move construction does not do uses_allocator construction - the value type is expected to behave according to the traits and get the right allocator. This allows for triviality if allocator can be trivially copy constructed and the constructed type can be trivially move constructed. Possible additional consideration is for basic_optional where the value type is not allocator aware - such a basic_optional does not need to store the allocator and triviality only depends on the triviality of the value type. This proposal does not consider such optimisation.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>value constructor<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">Value construction must do uses_allocator construction if allocators aren't always equal- the plain copy/move construction may use the wrong allocator.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">The paper does not propose exception specification on this value constructor and considers it QOI</span></p>
<p class="p7"><span class="s1">Exception specification considerations<span class="Apple-converted-space">  </span>: <br>
- for non AA type, the exception specification is equivalent to is_nothrow_constructible_v&lt;ValueType, T&gt; <br>
- for AA type, to get a possibly no throw construction, we need to delegate to plain copy/move which can possibly reuse the allocation. The delegation can only happen if allocators are always equal. If this constructor checked for allocators being always equal before deciding whether to do uses allocator construction or not, it would make sense for all inplace constructors and allocator extended constructors to do the same. This paper does not propose such considerations.</span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>copy assignment constructor<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">First the allocator is possibly modified based on the traits, then the assignment/construction is done as normal. Triviality can only happen if allocator is always equal as any other situation possibly requires a modification in the allocator that can not be checked at compiler time (the resulting allocator in copy construction can not be checked against the POCCA trait) Exception can be thrown by the assignment or the copy construction. The assignment never has to use the possibly modified allocator as the type is expected to follow the allocator traits. The construction doesn't need to use the allocator if allocator is always equal or if the value type is not allocator aware. In all other cases, the copy construction needs to explicitly provide the allocator.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">With the introduction of allocators, we now have to consider when we can do plain copy construction and when allocator extended construction is needed. <br>
If type is non AA, we can do plain copy construction. <br>
If the type is AA and allocator is always equal, we can also do plain copy construction. Note that, for allocator is always equal case, plain copy construction and allocator copy construction will efectiveky result in the same allocator. We do not consider the possibility of doing non allocator extended copy construction for the case where the copy assignment allocator propagation matches the resulting allocator at copy construction as that case can't be checked at compile time. In all other cases, copy construction must use allocator extended copy construction to guarantee that the right allocator is used for the value_type.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>move assignment constructor<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">First the allocator is possibly modified based on the traits, then the assignment/construction is done as normal. <br>
In addition to usual triviality requirements, triviality can only happen if the allocator is propagated for move assignment(POCMA=true) or if the allocator is always equal. <br>
Possible additional consideration is for basic_optional where the value type is not allocator aware - such a basic_optional does not need to store the allocator and the triviality only depends on the triviality of the value type operations. This proposal does not consider such optimisation.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">The exception specification needs to consider assignment and move construction operations. Move assignment can be done without explicilty using the allocator even for AA types. - an AA type is expected to folow the allocator traits. Move construction can be done directly for AA types if the allocator is always equal or if POCMA=true. Otherwise, the move construction needs to explicitly specify the allocator<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>value assignment constructor</b></span></h3>
<p class="p7"><span class="s1">Value construction must do uses_allocator construction if allocators aren't always equal- the plain copy/move construction may use the wrong allocator. Exception specification : <br>
- for non AA type, the exception specification is equivalent to is_nothrow_assignable_v&lt;Tj, T&gt; &amp; &amp; is_nothrow_constructible_v&lt;Tj, T&gt; <br>
- for AA type, any allocation is potentially throwing. To get a possibly no throw construction, we need to delegate to plain move which can possibly reuse the allocation. Such delegation can only happen if allocators are always equal. <br>
Possible additional consideration is for basic_variant where no types are allocator aware - such a basic_variant does not need to ever allocate and exception specification depends only on the alternatives This proposal does not consider such optimisation.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>swap</b></span></h3>
<p class="p7"><span class="s1">First the allocator is possibly modified based on the traits, then the swap/construction is done as normal. Exception specification : To get a possibly no throw construction, we need to delegate to plain move which can possibly reuse the allocation. The delegation can only happen if allocators are always equal or if propagate_on_container_swap == true (for such a type, the resulting allocator in move construction is the required allocator as move construction always propagates the allocator.) This means that swap can only be noexcept if <br>
- value type is is_nothrow_move_constructible and is_nothrow_constructible_v, and <br>
- allocator is always equal or propagate_on_container_swap == true<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="s1"></span><br></p>
<p class="p9"><span class="s1"></span><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s5"><b>basic_optional</b></span><span class="s1"><b> supports non-scoped propagating allocators<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p9"><span class="s1"></span><br></p>
<p class="p7"><span class="s1">There are two ways of viewing </span><span class="s3">basic_optional&lt;T&gt;</span><span class="s1"> from allocator propagation perspective : <br>
#1 </span><span class="s3">basic_optional&lt;T&gt;</span><span class="s1"> is like a </span><span class="s3">std::tuple</span><span class="s1">, i.e. it only accepts the allocator at construction so it can forward it to the value_type object. One can use a non-scoped propagation allocator, and when using a scoped propagation allocator </span><span class="s3">basic_optional&lt;T&gt;</span><span class="s1"> will not "consume" an allocator level. An optional object is in a way like a tuple object as it does not use the allocator itself, it only passes it into the value_type object. <br>
#2 </span><span class="s3">basic_optional&lt;T&gt;</span><span class="s1"> is like a </span><span class="s3">std::vector</span><span class="s1">, i.e. it is a container of one or zero elements, and one should use a scoped propagating allocator if one wants the value_type object to use the allocator. In this approach </span><span class="s3">basic_optional&lt;T&gt;</span><span class="s1"> will "consume" an allocator level. Using non-scoped propagating allocators makes little sense in this scenario.<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="s1"></span><br></p>
<p class="p7"><span class="s1">The proposal implements #1 as </span><span class="s3">basic_optional</span><span class="s1"> itself does not allocate any memory so it makes little sense for it to consume an alloctor level.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">The basic design of an AA optional is straight-forward: Add an allocator to all of its constructors and use that allocator to construct the value object each type the optional is engaged. However, when holding a non-AA type, there is no reason to pay the overhead of storing an allocator.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s3">uses_allocator&lt;basic_optional&lt;T,Alloc&gt;&gt;</span><span class="s1"> corresponds to </span><span class="s3">uses_allocator&lt;T,Alloc&gt;</span><span class="s1">. We believe there is no need to support the AA constructor interface for non-AA types. Generic programming should use uses-allocator construction and </span><span class="s3">std::make_obj_using_allocator</span><span class="s1"> to invoke the correct constructors.<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="s1"></span><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Courier; color: #000000; -webkit-text-stroke: #000000"><span class="s6"><b>Conversions between </b></span><span class="s1"><b>std::optional&lt;T&gt;</b></span><span class="s6"><b> and </b></span><span class="s1"><b>std::basic_optional&lt;T,Alloc&gt;</b></span></h3>
<p class="p14"><span class="s1"><b></b></span><br></p>
<p class="p7"><span class="s1">Consider: </span><span class="s3"><br>
<br>
basic_optional&lt;T,Alloc&gt; x; <br>
optional&lt;T&gt; y = x; // #1 <br>
basic_optional&lt;T,Alloc&gt; z = y; // #2 <br>
<br>
optional&lt;T&gt; foo_constref(const optional&lt;T&gt;&amp; ); <br>
foo_constref(x); // #3 <br>
<br>
void foo_ref(optional&lt;T&gt;&amp;); <br>
foo_ref(x) // #4 </span><span class="s1"><br>
<br>
In the example above, we do not believe #1,#2, and #3 are ever problematic, but may be useful for code which currently uses </span><span class="s3">optional</span><span class="s1">. However, #4, if allowed, would potentially modify the </span><span class="s3">basic_optional</span><span class="s1"> in a way that does not preserve the allocator requirements. Note that #4 is only problematic if </span><span class="s3">uses_allocator&lt;basic_optional&lt;T,Alloc&gt;&gt; == true</span><span class="s1">.<span class="Apple-converted-space"> </span></span></p>
<p class="p7"><span class="s1">Allowing #4 for cases where </span><span class="s3">uses_allocator&lt;basic_optional&lt;T,Alloc&gt;&gt; == false</span><span class="s1"> would make re-using codebases which traffic in non allocator aware </span><span class="s3">optional</span><span class="s1"> possible when allocator does not matter. However, it adds to the complexity of design. It is also questionable whether there is a need for this conversion. One can have two reasons to use </span><span class="s3">basic_optional</span><span class="s1"> with non allocator aware types: <br>
- writing generic code which serves both allocator and non allocator aware types. Allowing interoperability with </span><span class="s3">optional</span><span class="s1"> for only certain cases seems unhelpful in such a case. <br>
- using </span><span class="s3">basic_optional</span><span class="s1"> for all optional types for simplicity purposes. Allowing interoperability with </span><span class="s3">optional</span><span class="s1"> would be useful in this case. <br>
We propose to not implement conversion #4 until the time it is needed. However, library implementors might want to consider this as a possible extension because it might inform the implementation design they go for.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Allocator used in value_or<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">It is not all that obvious which allocator should be used for the object returned by </span><span class="s3">value_or</span><span class="s1">. Should the decision be left to the type or should it be mandated by the optional ? That is, should the object be constructed by plain copy/move construction or with uses-allocator construction? The proposal leaves the decision to the value_type. If the user cares about the allocator of the returned object, it should be explicitly provided by the user. We may consider providing allocator extended version of </span><span class="s3">value_or</span><span class="s1"> in the future, if this use case proves to be common enough.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Deduction guides for mixed optionals unpack</b></span></h3>
<p class="p15"><span class="s7">Consider </span><span class="s1"><br>
<br>
std::optional x1 = value_type(); <br>
std::basic_optional copy1 = x1; // #1 <br>
<br>
std::optional x2 = value_type_aa(); <br>
std::basic_optional copy2 = x2; // #2 <br>
<br>
std::basic_optional x3 = value_type(); <br>
std::optional copy3 = x3; // #3 <br>
<br>
std::basic_optional x4 = value_type_aa(); <br>
std::optional copy4 = x4; // #4 </span><span class="s7"><br>
<br>
What should the types of </span><span class="s1">x1</span><span class="s7">, </span><span class="s1">x2</span><span class="s7">, </span><span class="s1">x3</span><span class="s7">, and </span><span class="s1">x4</span><span class="s7"> in the above example be ? <br>
<br>
The current proposal favours unpacking, and the types are: <br>
<br>
#1 </span><span class="s1">std::basic_optional&lt;value_type, allocator&lt;value_type&gt;&gt;</span><span class="s7">, <br>
#2 </span><span class="s1">std::basic_optional&lt;value_type_aa, allocator&lt;value_type_aa&gt;&gt;</span><span class="s7">, <br>
#3 </span><span class="s1">std::optional&lt;value_type&gt;</span><span class="s7">, and <br>
#4 </span><span class="s1">std::optional&lt;value_type_aa&gt;</span><span class="s7">. <br>
<br>
This seems to fit with the idea that </span><span class="s1">std::basic_optional</span><span class="s7"> and </span><span class="s1">std::optional</span><span class="s7"> are types that are close enough that they deserve to be treated equally wherever they can. However, it does mean that they are somehow blessed by the standard to work together in a way a user defined type which inherits from </span><span class="s1">std::optional</span><span class="s7"> wouldn't be.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Non allocator aware </b></span><span class="s5"><b>basic_optional</b></span><span class="s1"><b> is not an alias for </b></span><span class="s5"><b>optional</b></span><span class="s1"><b><span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">An early draft of this proposal suggested using a type alias where a non-AA </span><span class="s3">basic_optional</span><span class="s1"> aliases </span><span class="s3">std::optional</span><span class="s1">, and AA </span><span class="s3">basic_optional</span><span class="s1"> aliases a new unnamed type. However, this causes usability issues. Type deduction in cases like : <br>
</span><span class="s3"><br>
template &lt;typename T&gt; <br>
void foo(basic_optional&lt;T&gt;); <br>
</span><span class="s1"><br>
did not work. The above was equivalent to <br>
</span><span class="s3"><br>
template &lt;typename T, typename Alloc&gt; <br>
void foo(std::conditional&lt;std::uses_allocator &lt;T, Alloc&lt;&gt;&gt;::value, <br>
<i>__basic_optional</i>&lt;T&gt;, <br>
std::optional&lt;T&gt;&gt;:type); <br>
</span><span class="s1"><br>
and using the nested </span><span class="s3">type</span><span class="s1"> of the </span><span class="s3">std::conditional</span><span class="s1"> as the function template parameter made for an undeduced context.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Make facilities are not provided<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">Make facilities have been deemed unnecessary with the availability of CTAD. The current version of the paper doesn't propose </span><span class="s3">std::make_basic_optional</span><span class="s1"> nor </span><span class="s3">std::pmr::make_optional</span><span class="s1">. Previous version suggested those be included, but with implementation experience, we found a complexity in allowing the allocator type to be both specifiable and defaulted in non allocator extended version of the make facility. We deem such complexity unnecessary with the advent of the CTAD feature.<span class="Apple-converted-space"> </span></span></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Allocator aware types are assumed to be move enabled<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s3">basic_optional</span><span class="s1"> uses explicit allocator construction except in cases where invoking a direct </span><span class="s3">value_type</span><span class="s1"> operation allows for move operations to remain noexcept. This is the case in move constructor for all allocators, and in move assignment for allocators that have </span><span class="s3">propagate_on_container_move_assignment==true</span><span class="s1">. If the </span><span class="s3">value_type</span><span class="s1"> is allocator aware, but does not support move semantics (i.e. moves deteriorate to copies), it is possible that the allocator of the </span><span class="s3">value_type</span><span class="s1"> object will get out of sync with the allocator of the </span><span class="s3">basic_optional</span><span class="s1">. We do not expect such types to exist.<span class="Apple-converted-space"> </span></span></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Feedback items for LEWG:<span class="Apple-converted-space"> </span></b></span></h2>
<p class="p9"><span class="s1"></span><br></p>
<h3 style="margin: 0.0px 0.0px 14.0px 0.0px; font: 14.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Should assignments use is_constructible trait ?<span class="Apple-converted-space"> </span></b></span></h3>
<p class="p7"><span class="s1">It's not construct from U we need, it's construct from U using the allocator. Do we need a new trait ?</span></p>
<p class="p9"><span class="s1"></span><br></p>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s1"><b>Proposed wording</b></span></h2>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; font: 18.0px Times; color: #000000; -webkit-text-stroke: #000000; min-height: 23.0px"><span class="s1"><b></b></span><br></h2>
<h2 style="margin: 0.0px 0.0px 14.9px 0.0px; font: 14.0px Times; -webkit-text-stroke: #000000"><span class="s8"><b>Modify </b></span><span class="s9"><b>22.5.2</b></span><span class="s1"><b> Header &lt;optional&gt; synopsis</b></span></h2>
<p class="p18"><span class="s1">namespace</span><span class="s10"> std </span><span class="s11">{</span></p>
<p class="p19"><span class="s12"><span class="Apple-converted-space">  </span></span><span class="s1"><i>// </i><a href="https://eel.is/c++draft/optional#optional"><span class="s13"><i>[optional.optional]</i></span></a><i>, class template </i></span><span class="s7">optional</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">class</span><span class="s1"> optional; <span class="Apple-converted-space">                                                    </span></span><span class="s16"><i>// partially freestanding</i></span></p>
<p class="p21"><span class="s12"><span class="Apple-converted-space">  </span></span><span class="s1"><i>// </i></span><span class="s9"><i>[optional.basic.optional]</i></span><span class="s1"><i>, class template basic_</i></span><span class="s7">optional</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> T, class Allocator</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s17"><span class="Apple-converted-space">    </span></span><span class="s18">class</span><span class="s17"> basic_optional; <span class="Apple-converted-space">       </span></span><span class="s1"> <span class="Apple-converted-space">                                            </span></span><span class="s16"><i>// partially freestanding</i></span></p>
<p class="p8"><span class="s1">…</span></p>
<p class="p19"><span class="s12"><span class="Apple-converted-space"> </span></span><span class="s1"><i>// </i><a href="https://eel.is/c++draft/optional#relops"><span class="s13"><i>[optional.relops]</i></span></a><i>, relational operators</i></span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p23"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s10"> T, <a href="https://eel.is/c++draft/cmp.concept#concept:three_way_comparable_with"><span class="s19">three_way_comparable_with</span></a></span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> compare_three_way_result_t</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">operator</span><span class="s14">&lt;=&gt;</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U, class AllocatorU&gt;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">bool</span><span class="s1"> </span><span class="s15">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> basic_optional&lt;U, AllocatorU&gt;</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U, class AllocatorU&gt;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">bool</span><span class="s1"> </span><span class="s15">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> basic_optional&lt;U, AllocatorU&gt;</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U, class AllocatorU&gt;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">bool</span><span class="s1"> </span><span class="s15">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> basic_optional&lt;U, AllocatorU&gt;</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U, class AllocatorU&gt;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">bool</span><span class="s1"> </span><span class="s15">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> basic_optional&lt;U, AllocatorU&gt;</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U, class AllocatorU&gt;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">bool</span><span class="s1"> </span><span class="s15">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> basic_optional&lt;U, AllocatorU&gt;</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U, class AllocatorU&gt;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">bool</span><span class="s1"> </span><span class="s15">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> basic_optional&lt;U, AllocatorU&gt;</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p25"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s10"> T, <a href="https://eel.is/c++draft/cmp.concept#concept:three_way_comparable_with"><span class="s19">three_way_comparable_with</span></a></span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> compare_three_way_result_t</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s17"><span class="Apple-converted-space">      </span></span><span class="s18">operator</span><span class="s20">&lt;=&gt;</span><span class="s21">(</span><span class="s18">const</span><span class="s17"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s20">&amp;</span><span class="s17">, </span><span class="s18">const</span><span class="s17"> basic_optional&lt;U, AllocatorU&gt;</span><span class="s20">&amp;</span><span class="s21">)</span><span class="s17">;</span></p>
<p class="p26"><span class="s1"></span><br></p>
<p class="p19"><span class="s12"><span class="Apple-converted-space">  </span></span><span class="s1"><i>// </i><a href="https://eel.is/c++draft/optional#nullops"><span class="s13"><i>[optional.nullops]</i></span></a><i>, comparison with </i></span><span class="s7">nullopt</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, nullopt_t</span><span class="s11">)</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> strong_ordering </span><span class="s15">operator</span><span class="s14">&lt;=&gt;</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&amp;</span><span class="s1">, nullopt_t</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s1">;</span></p>
<p class="p27"><span class="s22"><span class="Apple-converted-space">  </span></span><span class="s23">template</span><span class="s14">&lt;</span><span class="s23">class</span><span class="s22"> T, class Allocator</span><span class="s14">&gt;</span><span class="s22"> </span><span class="s23">constexpr</span><span class="s22"> </span><span class="s23">bool</span><span class="s22"> </span><span class="s23">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s23">const</span><span class="s22"> basic_optional</span><span class="s14">&lt;</span><span class="s22">T, Allocator</span><span class="s14">&gt;&amp;</span><span class="s22">, nullopt_t</span><span class="s11">)</span><span class="s22"> </span><span class="s23">noexcept</span><span class="s22">;</span></p>
<p class="p28"><span class="s22"><span class="Apple-converted-space">  </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s22"> T, </span><span class="s1">class Allocator</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s17"><span class="Apple-converted-space">    </span></span><span class="s18">constexpr</span><span class="s17"> strong_ordering </span><span class="s18">operator</span><span class="s20">&lt;=&gt;</span><span class="s21">(</span><span class="s18">const</span><span class="s17"> basic_optional</span><span class="s20">&lt;</span><span class="s17">T, </span><span class="s24">Allocator</span><span class="s20">&gt;&amp;</span><span class="s17">, nullopt_t</span><span class="s21">)</span><span class="s17"> </span><span class="s18">noexcept</span><span class="s17">;</span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p29"><span class="s25"><i>// </i><a href="https://eel.is/c++draft/optional#comp.with.t"><span class="s9"><i>[optional.comp.with.t]</i></span></a><i>, comparison with </i></span><span class="s26">T</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p23"><span class="s10"><span class="Apple-converted-space">      </span></span><span class="s15">requires</span><span class="s10"> </span><span class="s11">(</span><span class="s14">!<a href="https://eel.is/c++draft/optional#concept:is-derived-from-optional"><span class="s9"><i>is-derived-from-optional</i></span></a>&lt;</span><span class="s10">U</span><span class="s14">&gt;</span><span class="s11">)</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10"> <a href="https://eel.is/c++draft/cmp.concept#concept:three_way_comparable_with"><span class="s19">three_way_comparable_with</span></a></span><span class="s14">&lt;</span><span class="s10">T, U</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> compare_three_way_result_t</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">operator</span><span class="s14">&lt;=&gt;</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class U, class AllocatorU</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const basic_optional&lt;U,AllocatorU&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class U, class AllocatorU</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const basic_optional&lt;U,AllocatorU&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class U, class AllocatorU</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const basic_optional&lt;U,AllocatorU&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class U, class AllocatorU</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const basic_optional&lt;U,AllocatorU&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class U, class AllocatorU</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const basic_optional&lt;U,AllocatorU&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class U, class AllocatorU</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10">, </span><span class="s1">const basic_optional&lt;U,AllocatorU&gt;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p24"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class T, class AllocatorT, class U</span><span class="s14">&gt;</span></p>
<p class="p25"><span class="s10"><span class="Apple-converted-space">      </span></span><span class="s15">requires</span><span class="s10"> </span><span class="s11">(</span><span class="s14">!<a href="https://eel.is/c++draft/optional#concept:is-derived-from-optional"><span class="s9"><i>is-derived-from-optional</i></span></a>&lt;</span><span class="s10">U</span><span class="s14">&gt;</span><span class="s11">)</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10"> <a href="https://eel.is/c++draft/cmp.concept#concept:three_way_comparable_with"><span class="s19">three_way_comparable_with</span></a></span><span class="s14">&lt;</span><span class="s10">T, U</span><span class="s14">&gt;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> compare_three_way_result_t</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s17"><span class="Apple-converted-space">      </span></span><span class="s18">operator</span><span class="s20">&lt;=&gt;</span><span class="s21">(</span><span class="s18">const</span><span class="s17"> basic_optional&lt;T, AllocatorT&gt;</span><span class="s20">&amp;</span><span class="s17">, </span><span class="s18">const</span><span class="s17"> U</span><span class="s20">&amp;</span><span class="s21">)</span><span class="s17">;</span></p>
<p class="p26"><span class="s1"></span><br></p>
<p class="p19"><span class="s12"><span class="Apple-converted-space">  </span></span><span class="s1"><i>// </i><a href="https://eel.is/c++draft/optional#specalg"><span class="s13"><i>[optional.specalg]</i></span></a><i>, specialized algorithms</i></span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">void</span><span class="s1"> swap</span><span class="s11">(</span><span class="s1">optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&amp;</span><span class="s1">, optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> T, class Allocator</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s17"><span class="Apple-converted-space">    </span></span><span class="s18">constexpr</span><span class="s17"> </span><span class="s18">void</span><span class="s17"> swap</span><span class="s21">(</span><span class="s17">basic_optional&lt;T, Allocator&gt;</span><span class="s20">&amp;</span><span class="s17">, basic_optional&lt;T, Allocator&gt;</span><span class="s20">&amp;</span><span class="s21">)</span><span class="s17"> </span><span class="s18">noexcept</span><span class="s21">(</span><span class="s17"><i>see below</i></span><span class="s21">)</span><span class="s17">;</span></p>
<p class="p26"><span class="s1"></span><br></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1"><i>see below</i></span><span class="s14">&gt;</span><span class="s1"> make_optional</span><span class="s11">(</span><span class="s1">T</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s14">...</span><span class="s10"> Args</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> make_optional</span><span class="s11">(</span><span class="s1">Args</span><span class="s14">&amp;&amp;...</span><span class="s1"> args</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U, </span><span class="s1">class</span><span class="s14">...</span><span class="s10"> Args</span><span class="s14">&gt;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> make_optional</span><span class="s11">(</span><span class="s1">initializer_list</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1"> il, Args</span><span class="s14">&amp;&amp;...</span><span class="s1"> args</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p26"><span class="s1"></span><br></p>
<p class="p19"><span class="s12"><span class="Apple-converted-space">  </span></span><span class="s1"><i>// </i><a href="https://eel.is/c++draft/optional#hash"><span class="s13"><i>[optional.hash]</i></span></a><i>, hash support</i></span></p>
<p class="p18"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">struct</span><span class="s10"> hash;</span></p>
<p class="p20"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">struct</span><span class="s1"> hash</span><span class="s14">&lt;</span><span class="s1">optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&gt;</span><span class="s1">;</span></p>
<p class="p22"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> T,<span class="Apple-converted-space"> </span></span><span class="s22"> class Allocator</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">struct</span><span class="s1"> hash</span><span class="s14">&lt;</span><span class="s1">basic_optional&lt;T, Allocator&gt;</span><span class="s14">&gt;</span><span class="s1">;</span></p>
<p class="p30"><span class="s1"></span><br></p>
<p class="p31"><span class="s1"><span class="Apple-converted-space">  </span>namespace pmr {</span></p>
<p class="p32"><span class="s22"><span class="Apple-converted-space">            </span></span><span class="s1">template</span><span class="s27">&lt;</span><span class="s1">class</span><span class="s27"> T&gt;</span></p>
<p class="p31"><span class="s1"><span class="Apple-converted-space">    <span class="Apple-tab-span">	</span></span>using optional = basic_optional&lt;T, polymorphic_allocator&lt;byte&gt;&gt;;</span></p>
<p class="p33"><span class="s17"><span class="Apple-converted-space">  </span>}<span class="Apple-converted-space"> </span></span></p>
<p class="p34"><span class="s1">}</span></p>
<p class="p8"><span class="s28">Any instance of </span><span class="s29">basic_optional&lt;T, Allocator&gt;</span><span class="s28"> at any given time either contains a value or does not contain a value. When an instance of </span><span class="s29">basic_optional&lt;T, Allocator&gt;</span><span class="s28"> contains a value, it means that an object of type </span><span class="s29">T</span><span class="s28"> is allocated within the storage of the </span><span class="s29">basic_optional&lt;T, Allocator&gt;</span><span class="s28"> object. Implementations are not permitted to use additional storage, such as dynamic memory, to allocate its contained value. The contained value shall be allocated in a region of the </span><span class="s29">basic_optional&lt;T, Allocator&gt;</span><span class="s28"> storage suitably aligned for the type </span><span class="s29">T</span><span class="s28"> and, if </span><span class="s29">uses-alloc</span><span class="s28"> is true, constructed by uses-allocator construction with allocator </span><span class="s29"><i>alloc</i></span><span class="s28">. When an object of type </span><span class="s29">basic_optional&lt;T, Allocator&gt;</span><span class="s28"> is contextually converted to bool, the conversion returns </span><span class="s29">true</span><span class="s28"> if the object contains a value; otherwise the conversion returns </span><span class="s29">false</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28">Member </span><span class="s29">val</span><span class="s28"> is provided for exposition only. When an </span><span class="s29">basic_optional&lt;T, Allocator&gt;</span><span class="s28"> object contains a value, </span><span class="s29">val</span><span class="s28"> points to the contained value.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28">If and only if </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, the following applies :<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28">- </span><span class="s29">allocator_type</span><span class="s28"> will be defined,<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28">- exposition only member </span><span class="s29"><i>alloc</i></span><span class="s28"> will be provided and will be used to create the contained value, if any, and<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28">- if </span><span class="s29">T</span><span class="s28"> provides a </span><span class="s29">get_allocator()</span><span class="s28"> member function whose return type is convertible to </span><span class="s29">Allocator&lt;&gt;</span><span class="s28">, the implementation is allowed to assume that the allocator used for constructing the element is the same allocator as returned by </span><span class="s29">T::get_allocator()</span><span class="s28">. [<i>Note:</i> In such an implementation, </span><span class="s29">pmr::optional&lt;pmr::string&gt;</span><span class="s28"> will be zero-overhead compared to </span><span class="s29">optional&lt;pmr::string&gt;</span><span class="s28">. -- <i>end note</i>]<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s29">T</span><span class="s28"> shall be a type other than </span><span class="s29"><i>cv</i> in_Â­place_Â­t</span><span class="s28">, </span><span class="s29"><i>cv</i> allocator_arg_Â­t</span><span class="s28">, or </span><span class="s29"><i>cv</i> nullopt_Â­t</span><span class="s28"> that meets the <i>Cpp17Destructible</i> requirements (Table 30).</span></p>
<p class="p9"><span class="s1"></span><br></p>
<h4 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s28"><b>Constructors [basic.optional.ctor]</b></span></h4>
<p class="p9"><span class="s1"></span><br></p>
<p class="p9"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">basic_optional() noexcept;</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">basic_optional(nullopt_t) noexcept;</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Ensures:</i> *this does not contain a value.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i> No contained value is initialized.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">basic_optional(const basic_optional&amp; rhs);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is initialized from </span><span class="s29">allocator_traits&lt;Allocator&gt;::select_on_container_copy_construction(rhs.get_allocator())</span><span class="s28">. If </span><span class="s29">rhs</span><span class="s28"> contains a value, initializes the contained value the expression </span><span class="s29">*rhs</span><span class="s28">..<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Mandates:</i></span><span class="s28">is_Â­copyÂ­_constructible_Â­v&lt;T&gt;</span><span class="s30"> is true.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">basic_optional(basic_optional&amp;&amp; rhs) noexcept(<i>see below</i>)</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is initialized with </span><span class="s29">rhs.<i>alloc</i></span><span class="s28">. If </span><span class="s29">rhs</span><span class="s28"> contains a value, initializes the contained value the expression </span><span class="s29">std::move(*rhs)</span><span class="s28">. </span><span class="s29">bool(rhs)</span><span class="s28"> is unchanged.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i> The expression inside </span><span class="s29">noexcept</span><span class="s28"> is equivalent to </span><span class="s29">is_Â­nothrow_Â­move_Â­constructible_Â­v&lt;T&gt;</span><span class="s28">. If type is not move enabled, the allocator of the resulting </span><span class="s29">value_type</span><span class="s28"> object may differ from </span><span class="s29"><i>alloc</i></span><span class="s28"><span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Mandates:</i></span><span class="s28">is_Â­move_Â­constructible_Â­v&lt;T&gt;</span><span class="s30"> is true.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">basic_optional(const optional&amp;);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. If </span><span class="s29">rhs</span><span class="s28"> contains a value, initializes the contained value with the expression </span><span class="s29">*rhs</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Mandates:</i></span><span class="s28">is_Â­copyÂ­_constructible_Â­v&lt;T&gt;</span><span class="s30"> is true.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">basic_optional(optional&amp;&amp; rhs)</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. If </span><span class="s29">rhs</span><span class="s28"> contains a value, constructs the contained value with uses-allocator construction ([allocator.uses.construction]) with <i>alloc</i> and the expression </span><span class="s29">std::move(*rhs)</span><span class="s28">. </span><span class="s29">bool(rhs)</span><span class="s28"> is unchanged.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Mandates:</i></span><span class="s28">is_Â­move_Â­constructible_Â­v&lt;T&gt;</span><span class="s30"> is true.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">template&lt;class... Args&gt; explicit basic_optional(in_place_t, Args&amp;&amp;... args);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. Constructs the contained value with uses-allocator construction ([allocator.uses.construction]) with <i>alloc</i> and </span><span class="s29">std::forward&lt;Args&gt;(args)....</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Ensures:</i> </span><span class="s29">*this</span><span class="s28"> contains a value..<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Mandates:</i></span><span class="s28">is_Â­copy_Â­constructible_Â­v&lt;T&gt;</span><span class="s30"> is true.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">template&lt;class... Args&gt; explicit basic_optional(in_place_t, initializer_list&lt;U&gt; il, Args&amp;&amp;... args);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. Constructs the contained value with uses-allocator construction ([allocator.uses.construction]) with <i>alloc</i>, </span><span class="s29">il, and std::forward&lt;Args&gt;(args)....</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Ensures:</i> </span><span class="s29">*this</span><span class="s28"> contains a value..<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Mandates:</i></span><span class="s28">is_constructible_v&lt;T, initializer_Â­list&lt;U&gt;&amp;, Args&amp;&amp;...&gt;</span><span class="s30"> is true.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">template&lt;class U = T&gt; explicit(<i>see below</i>) basic_optional(U&amp;&amp; rhs);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i>If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. Constructs the contained value with uses-allocator construction ([allocator.uses.construction]) with <i>alloc</i> and </span><span class="s29">std::forward&lt;U&gt;(rhs)</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Ensures:</i> </span><span class="s29">*this</span><span class="s28"> contains a value.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i>The expression inside </span><span class="s29">explicit</span><span class="s28"> is equivalent to:<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">!is_convertible_v&lt;U, T&gt;</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Mandates:</i><span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, U&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">true</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_Â­same_Â­v&lt;remove_Â­cvref_Â­t&lt;U&gt;, in_Â­place_Â­t&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">, and<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_Â­same_Â­v&lt;remove_Â­cvref_Â­t&lt;U&gt;,optional&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">template&lt;class U&gt; explicit(<i>see below</i>) basic_optional(const basic_optional&lt;U, Allocator&gt;&amp; rhs);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i>If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. If </span><span class="s29">rhs</span><span class="s28"> contains a value, constructs the contained value with uses-allocator construction ([allocator.uses.construction]) with <i>alloc</i> and </span><span class="s29">*rhs</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i>The expression inside </span><span class="s29">explicit</span><span class="s28"> is equivalent to:<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">!is_convertible_v&lt;const U&amp;, T&gt;</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Mandates:</i><span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const U&amp;&gt;</span><span class="s30"> is </span><span class="s28">true</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">, and<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">template&lt;class U&gt; explicit(<i>see below</i>) basic_optional(basic_optional&lt;U, Allocator&gt;&amp;&amp; rhs);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i>If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. If </span><span class="s29">rhs</span><span class="s28"> contains a value, constructs the contained value with uses-allocator construction ([allocator.uses.construction]) with <i>alloc</i> and </span><span class="s29">std::move(*rhs)</span><span class="s28">. </span><span class="s29">bool(rhs)</span><span class="s28"> is unchanged.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i>The expression inside </span><span class="s29">explicit</span><span class="s28"> is equivalent to:<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">!is_convertible_v&lt;U, T&gt;</span><span class="s30"><i>Mandates:</i><span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T,U&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">true</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">, and<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">template&lt;class U&gt; explicit(<i>see below</i>) basic_optional(const optional&lt;U&gt;&amp; rhs);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i>If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. If </span><span class="s29">rhs</span><span class="s28"> contains a value, constructs the contained value with uses-allocator construction ([allocator.uses.construction]) with <i>alloc</i> and </span><span class="s29">*rhs</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i>The expression inside </span><span class="s29">explicit</span><span class="s28"> is equivalent to:<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">!is_convertible_v&lt;const U&amp;, T&gt;</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Mandates:</i><span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const U&amp;&gt;</span><span class="s30"> is </span><span class="s28">true</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">, and<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">template&lt;class U&gt; explicit(<i>see below</i>) basic_optional(optional&lt;U&gt;&amp;&amp; rhs);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i>If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, </span><span class="s29"><i>alloc</i></span><span class="s28"> is default initialized. If </span><span class="s29">rhs</span><span class="s28"> contains a value, constructs the contained value with uses-allocator construction ([allocator.uses.construction]) with <i>alloc</i> and </span><span class="s29">std::move(*rhs)</span><span class="s28">. </span><span class="s29">bool(rhs)</span><span class="s28"> is unchanged.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Throws:</i> Any exception thrown by the selected constructor of </span><span class="s29">T</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i></span></p>
<p class="p8"><span class="s28">The expression inside </span><span class="s29">explicit</span><span class="s28"> is equivalent to:<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">!is_convertible_v&lt;U, T&gt;</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Mandates:</i><span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T,U&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">true</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">,<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30">, and<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30">- </span><span class="s28">is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;&amp;, T&gt;</span><span class="s30"> is </span><span class="s28">false</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p37"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">optional(allocator_arg_t, const Allocator&lt;&gt;&amp;) noexcept;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, nullopt_t) noexcept;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, const basic_optional&amp;);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, basic_optional&amp;&amp;) noexcept(<i>see below</i>);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, const optional&amp;);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, optional&amp;&amp;);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">template&lt;class... Args&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">explicit basic_optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, in_place_t, Args&amp;&amp;...);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">template&lt;class U, class... Args&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">explicit basic_optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, in_place_t, initializer_list&lt;U&gt;, Args&amp;&amp;...);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">template&lt;class U = T&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">explicit(<i>see below</i>) basic_optional(allocator_arg_t, const Allocator&lt;&gt;&amp;,U&amp;&amp;);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">template&lt;class U&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">explicit(<i>see below</i>) basic_optional(allocator_arg_t, const Allocator&lt;&gt;&amp;,const basic_optional&lt;U, Allocator&gt;&amp;);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">template&lt;class U&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">explicit(<i>see below</i>) basic_optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, basic_optional&lt;UAllocator&gt;&amp;&amp;);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">template&lt;class U&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">explicit(<i>see below</i>) basic_optional(allocator_arg_t, const Allocator&lt;&gt;&amp;,const optional&lt;U&gt;&amp;);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">template&lt;class U&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">explicit(<i>see below</i>) basic_optional(allocator_arg_t, const Allocator&lt;&gt;&amp;, optional&lt;U&gt;&amp;&amp;);<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Constraints:</i> </span><span class="s28">uses_allocator&lt;T,Allocator&lt;&gt;&gt;</span><span class="s30"> is true;<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> Equivalent to the preceding constructors except that </span><span class="s29"><i>alloc</i></span><span class="s28"> is initialized with </span><span class="s29">a</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="s1"></span><br></p>
<p class="p9"><span class="s1"></span><br></p>
<h4 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s28"><b>Destructor [basic.optional.dtor]</b></span></h4>
<p class="p9"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">~basic_optional();</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Effects:</i> If </span><span class="s28">is_Â­trivially_Â­destructible_Â­v&lt;T&gt; != true</span><span class="s30"> and </span><span class="s28">*this</span><span class="s30"> contains a value, calls </span><span class="s28">val-&gt;T::~T()</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i> If </span><span class="s29">is_Â­trivially_Â­destructible_Â­v&lt;T&gt;</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, then this destructor is trivial.<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="s1"></span><br></p>
<h4 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s28"><b>Assignment [basic.optional.assign]</b></span></h4>
<p class="p9"><span class="s1"></span><br></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">basic_optional&lt;T, Allocator&gt;&amp; operator=(nullopt_t) noexcept;</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">*this</span><span class="s28"> contains a value, calls </span><span class="s29">val-&gt;T::~T()</span><span class="s28"> to destroy the contained value; otherwise no effect.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i> </span><span class="s29">*this</span><span class="s28"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Ensures:</i> </span><span class="s29">*this</span><span class="s28"> does not contain a value.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">basic_optional&lt;T, Allocator&gt;&amp; operator=(const basic_optional&amp; rhs);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p38"><span class="s2"><i>Effects:</i> See Table</span></p>
<p class="p39"><span class="s30">Table — </span><span class="s28">basic_optional operator=(const basic_optional&amp; rhs)</span><span class="s30"> effects</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td1">
        <p class="p40"><span class="s1"><b></b></span><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p41"><span class="s29"><b>*this</b></span><span class="s28"><b> contains a value</b></span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p41"><span class="s29"><b>*this</b></span><span class="s28"><b> does not contain a value</b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p8"><span class="s29">rhs</span><span class="s28"> contains a value</span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p36"><span class="s30">If </span><span class="s28">allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment</span><span class="s30"> and </span><span class="s28">this-&gt;get_allocator() != rhs-&gt;get_allocator()</span><span class="s30">is true :<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">destroys the contained value by calling </span><span class="s29">val-&gt;T::~T()</span><span class="s28">,<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">propagates the allocator, and<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">initializes the contained value with </span><span class="s29">*rhs</span><span class="s28"> by uses-allocator construction with allocator alloc<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">otherwise :<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">assigns </span><span class="s29">*rhs</span><span class="s28"> to the contained value</span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p36"><span class="s30">If </span><span class="s28">allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment</span><span class="s30"> and </span><span class="s28">this-&gt;get_allocator() != rhs-&gt;get_allocator()</span><span class="s30">is true, propagates the allocator.<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">Initializes the contained value with </span><span class="s29">*rhs</span><span class="s28">. If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, initialization is done by uses-allocator construction with allocator </span><span class="s29"><i>alloc</i></span><span class="s28"><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p8"><span class="s29">rhs</span><span class="s28"> does not contain a value</span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p36"><span class="s30">If </span><span class="s28">allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment</span><span class="s30"> and </span><span class="s28">this-&gt;get_allocator() != rhs-&gt;get_allocator()</span><span class="s30">is true, propagates the allocator.<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">Destroys the contained value by calling </span><span class="s29">val-&gt;T::~T()</span></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p36"><span class="s30">If </span><span class="s28">allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment</span><span class="s30"> and </span><span class="s28">this-&gt;get_allocator() != rhs-&gt;get_allocator()</span><span class="s30">is true, propagates the allocator.</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"></span><br></p>
<p class="p8"><span class="s28"><i>Returns:</i> </span><span class="s29">*this</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i> If any exception is thrown, the result of the expression </span><span class="s29">bool(*this)</span><span class="s28"> remains unchanged. If an exception is thrown during the call to </span><span class="s29">T</span><span class="s28">'s copy constructor, no effect. If an exception is thrown during the call to </span><span class="s29">T</span><span class="s28">'s copy assignment, the state of of its contained value is as defined by the exception safety guarantee of is determined by the exception safety guarantee of </span><span class="s29">T</span><span class="s28">'s copy assignment. This operator shall be defined as deleted unless </span><span class="s29">is_Â­copy_Â­constructible_Â­v&lt;T&gt;</span><span class="s28"> is </span><span class="s29">true</span><span class="s28"> and </span><span class="s29">is_Â­copy_Â­assignable_Â­v&lt;T&gt;</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">basic_optional&lt;T, Allocator&gt;&amp; operator=(basic_optional&amp;&amp; rhs) noexcept(<i>see below</i>);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p38"><span class="s2"><i>Effects:</i> See Table</span></p>
<p class="p39"><span class="s30">Table — </span><span class="s28">basic_optional operator=(basic_optional&amp;&amp; rhs)</span><span class="s30"> effects</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td1">
        <p class="p40"><span class="s1"><b></b></span><br></p>
      </td>
      <td valign="middle" class="td3">
        <p class="p41"><span class="s29"><b>*this</b></span><span class="s28"><b> contains a value</b></span></p>
      </td>
      <td valign="middle" class="td4">
        <p class="p41"><span class="s29"><b>*this</b></span><span class="s28"><b> does not contain a value</b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p8"><span class="s29">rhs</span><span class="s28"> contains a value</span></p>
      </td>
      <td valign="middle" class="td3">
        <p class="p36"><span class="s30">If </span><span class="s28">allocator_traits&lt;Allocator&gt;::propagate_on_container_move_assignment</span><span class="s30"> is true,<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">propagates the allocator.<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">Assigns </span><span class="s29">std::move(*rhs)</span><span class="s28"> to the contained value</span></p>
      </td>
      <td valign="middle" class="td4">
        <p class="p36"><span class="s30">If </span><span class="s28">allocator_traits&lt;Allocator&gt;::propagate_on_container_move_assignment</span><span class="s30">:<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">- propagates the allocator<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">- Initializes the contained value with </span><span class="s29">std::move(*rhs)</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">Otherwise :<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">Initializes the contained value with </span><span class="s29">std::move(*rhs)</span><span class="s28">. If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, initialization is done by uses-allocator construction with allocator </span><span class="s29"><i>alloc</i></span><span class="s28"><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p8"><span class="s29">rhs</span><span class="s28"> does not contain a value</span></p>
      </td>
      <td valign="middle" class="td3">
        <p class="p36"><span class="s30">If </span><span class="s28">allocator_traits&lt;Allocator&gt;::propagate_on_container_move_assignment</span><span class="s30">, propagates the allocator.<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">Destroys the contained value by calling </span><span class="s29">val-&gt;T::~T()</span></p>
      </td>
      <td valign="middle" class="td4">
        <p class="p36"><span class="s30">If </span><span class="s28">allocator_traits&lt;Allocator&gt;::propagate_on_container_move_assignment</span><span class="s30">, propagates the allocator.<span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"></span><br></p>
<p class="p8"><span class="s28"><i>Returns:</i> </span><span class="s29">*this</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s30"><i>Ensures:</i> </span><span class="s28">bool(rhs) == bool(*this)</span><span class="s30">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks:</i> The expression inside </span><span class="s29">noexcept</span><span class="s28"> is equivalent to:<span class="Apple-converted-space"> </span></span></p>
<p class="p36"><span class="s28">is_nothrow_move_assignable_v&lt;T&gt; &amp;&amp; is_nothrow_move_constructible_v&lt;T&gt;</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28">If any exception is thrown, the result of the expression </span><span class="s29">bool(*this)</span><span class="s28"> remains unchanged. If an exception is thrown during the call to </span><span class="s29">T</span><span class="s28">'s move constructor, the state of </span><span class="s29">*rhs.val</span><span class="s28"> is determined by the exception safety guarantee of </span><span class="s29">T</span><span class="s28">'s move constructor. If an exception is thrown during the call to </span><span class="s29">T</span><span class="s28">'s move assignment, the state of </span><span class="s29">*val</span><span class="s28"> and </span><span class="s29">*rhs.val</span><span class="s28"> is determined by the exception safety guarantee of </span><span class="s29">T</span><span class="s28">'s move assignment.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Mandates:</i> is_Â­move_Â­constructible_Â­v&lt;T&gt; is </span><span class="s29">true</span><span class="s28"> and </span><span class="s29">is_Â­move_Â­assignable_Â­v&lt;T&gt;</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">. If type is not move enabled, the allocator of the resulting </span><span class="s29">value_type</span><span class="s28"> object may differ from </span><span class="s29"><i>alloc</i></span><span class="s28"><span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s1"></span><br></p>
<p class="p36"><span class="s28">template&lt;class U = T&gt; basic_optional&amp; operator=(U&amp;&amp; v);</span><span class="s30"><span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Effects:</i> If </span><span class="s29">*this</span><span class="s28"> contains a value, assigns </span><span class="s29">std::forward&lt;U&gt;(v)</span><span class="s28"> to the contained value; otherwise initializes the contained value with </span><span class="s29">std::forward&lt;U&gt;(v)</span><span class="s28">. If </span><span class="s29">uses-alloc</span><span class="s28"> is </span><span class="s29">true</span><span class="s28">, initialization is done by uses-allocator construction with allocator </span><span class="s29"><i>alloc</i></span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Returns:</i> </span><span class="s29">*this</span><span class="s28">.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Ensures:</i> </span><span class="s29">*this</span><span class="s28"> contains a value.<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="s28"><i>Remarks: If any exception is thrown, the result of the expression </i></span><span class="s29"><i>bool(*this)</i></span><span class="s28"><i> remains unchanged. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor, the state of </i></span><span class="s29"><i>v</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment, the state of </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> and </i></span><span class="s29"><i>v</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Any allocator propagation resulting from assignment of </i></span><span class="s29"><i>std::forward&lt;U&gt;(v)</i></span><span class="s28"><i> to the contained value will not be reflected in the </i></span><span class="s29"><i>basic_optional</i></span><span class="s28"><i>'s allocator.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Mandates:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_Â­same_Â­v&lt;remove_Â­cvref_Â­t&lt;U&gt;, alloc-optional&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>conjunction_Â­v&lt;is_Â­scalar&lt;T&gt;, is_Â­same&lt;T, decay_Â­t&lt;U&gt;&gt;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T,U&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>, and<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_Â­assignable_Â­v&lt;T&amp;,U&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U&gt; basic_optional&amp; operator=(const basic_optional&lt;U, Allocator&gt;&amp; rhs);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p38"><span class="s2"><i>Effects: See Table</i></span></p>
<p class="p39"><span class="s30"><i>Table — </i></span><span class="s28"><i>basic_optional operator=(const basic_optional&lt;U, Allocator&gt;&amp;)</i></span><span class="s30"><i> effects</i></span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td5">
        <p class="p40"><span class="s1"><b><i></i></b></span><br></p>
      </td>
      <td valign="middle" class="td6">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> contains a value</i></b></span></p>
      </td>
      <td valign="middle" class="td7">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> does not contain a value</i></b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td5">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> contains a value</i></span></p>
      </td>
      <td valign="middle" class="td6">
        <p class="p8"><span class="s28"><i>assigns </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i> to the contained value</i></span></p>
      </td>
      <td valign="middle" class="td7">
        <p class="p8"><span class="s28"><i>initializes the contained value with </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i>. If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i><span class="Apple-converted-space"> </span></i></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td5">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> does not contain a value</i></span></p>
      </td>
      <td valign="middle" class="td6">
        <p class="p8"><span class="s28"><i>destroys the contained value by calling </i></span><span class="s29"><i>val-&gt;T::~T()</i></span></p>
      </td>
      <td valign="middle" class="td7">
        <p class="p8"><span class="s28"><i>no effect</i></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Ensures: </i></span><span class="s28"><i>bool(rhs) == bool(*this)</i></span><span class="s30"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Remarks: If any exception is thrown, the result of the expression </i></span><span class="s29"><i>bool(*this)</i></span><span class="s28"><i> remains unchanged. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor, no effect. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment, the state of </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Mandates:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_same&lt;T,U&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable&lt;T&amp;, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, and<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U&gt; basic_optional&amp; operator=(basic_optional&lt;U, Allocator&gt;&amp;&amp; rhs);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p38"><span class="s2"><i>Effects: See Table</i></span></p>
<p class="p39"><span class="s30"><i>Table — </i></span><span class="s28"><i>basic_optional operator=(basic_optional&lt;U, Allocator&gt;&amp;&amp;)</i></span><span class="s30"><i> effects</i></span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td8">
        <p class="p40"><span class="s1"><b><i></i></b></span><br></p>
      </td>
      <td valign="middle" class="td9">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> contains a value</i></b></span></p>
      </td>
      <td valign="middle" class="td10">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> does not contain a value</i></b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td8">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> contains a value</i></span></p>
      </td>
      <td valign="middle" class="td9">
        <p class="p8"><span class="s28"><i>assigns </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i> to the contained value</i></span></p>
      </td>
      <td valign="middle" class="td10">
        <p class="p8"><span class="s28"><i>initializes the contained value with </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i>. If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i> .</i></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td8">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> does not contain a value</i></span></p>
      </td>
      <td valign="middle" class="td9">
        <p class="p8"><span class="s28"><i>destroys the contained value by calling </i></span><span class="s29"><i>val-&gt;T::~T()</i></span></p>
      </td>
      <td valign="middle" class="td10">
        <p class="p8"><span class="s28"><i>no effect</i></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Ensures: </i></span><span class="s28"><i>bool(rhs) == bool(*this)</i></span><span class="s30"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Remarks: If any exception is thrown, the result of the expression </i></span><span class="s29"><i>bool(*this)</i></span><span class="s28"><i> remains unchanged. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s move constructor, the state of </i></span><span class="s29"><i>*rhs.val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s move constructor. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s move assignment, the state of </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> and </i></span><span class="s29"><i>*rhs.val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s move assignment.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Mandates:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_same&lt;T,U&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable&lt;T&amp;, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const U&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, and<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U, class AllocatorU&gt; basic_optional&amp; operator=(const basic_optional&lt;U, AllocatorU&gt;&amp; rhs);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p38"><span class="s2"><i>Effects: See Table</i></span></p>
<p class="p39"><span class="s30"><i>Table — </i></span><span class="s28"><i>basic_optional operator=(const basic_optional&lt;U, AllocatorU&gt;&amp;)</i></span><span class="s30"><i> effects</i></span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td5">
        <p class="p40"><span class="s1"><b><i></i></b></span><br></p>
      </td>
      <td valign="middle" class="td6">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> contains a value</i></b></span></p>
      </td>
      <td valign="middle" class="td7">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> does not contain a value</i></b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td5">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> contains a value</i></span></p>
      </td>
      <td valign="middle" class="td6">
        <p class="p8"><span class="s28"><i>assigns </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i> to the contained value</i></span></p>
      </td>
      <td valign="middle" class="td7">
        <p class="p8"><span class="s28"><i>initializes the contained value with </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i>. If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i><span class="Apple-converted-space"> </span></i></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td5">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> does not contain a value</i></span></p>
      </td>
      <td valign="middle" class="td6">
        <p class="p8"><span class="s28"><i>destroys the contained value by calling </i></span><span class="s29"><i>val-&gt;T::~T()</i></span></p>
      </td>
      <td valign="middle" class="td7">
        <p class="p8"><span class="s28"><i>no effect</i></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Ensures: </i></span><span class="s28"><i>bool(rhs) == bool(*this)</i></span><span class="s30"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Remarks: If any exception is thrown, the result of the expression </i></span><span class="s29"><i>bool(*this)</i></span><span class="s28"><i> remains unchanged. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor, no effect. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment, the state of </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Mandates:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>- </i></span><span class="s29"><i>is_same&lt;T,U&gt;</i></span><span class="s28"><i> or is_same&lt;Allocator, AllocatorU&gt; is </i></span><span class="s29"><i>false</i></span><span class="s28"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable&lt;T&amp;, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, AllocatorU&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, AllocatorU&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, AllocatorU&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, AllocatorU&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, AllocatorU&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, AllocatorU&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, AllocatorU&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, AllocatorU&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, AllocatorU&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, and<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, AllocatorU&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U, class AllocatorU&gt; basic_optional&amp; operator=(basic_optional&lt;U, AllocatorU&gt;&amp;&amp; rhs);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p38"><span class="s2"><i>Effects: See Table</i></span></p>
<p class="p39"><span class="s30"><i>Table — </i></span><span class="s28"><i>basic_optional operator=(basic_optional&lt;U, AllocatorU&gt;&amp;&amp;)</i></span><span class="s30"><i> effects</i></span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td11">
        <p class="p40"><span class="s1"><b><i></i></b></span><br></p>
      </td>
      <td valign="middle" class="td12">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> contains a value</i></b></span></p>
      </td>
      <td valign="middle" class="td13">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> does not contain a value</i></b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td11">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> contains a value</i></span></p>
      </td>
      <td valign="middle" class="td12">
        <p class="p8"><span class="s28"><i>assigns </i></span><span class="s29"><i>std::move(*rhs)</i></span><span class="s28"><i> to the contained value</i></span></p>
      </td>
      <td valign="middle" class="td13">
        <p class="p8"><span class="s28"><i>initializes the contained value with </i></span><span class="s29"><i>std::move(*rhs)</i></span><span class="s28"><i>. If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i> .</i></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td11">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> does not contain a value</i></span></p>
      </td>
      <td valign="middle" class="td12">
        <p class="p8"><span class="s28"><i>destroys the contained value by calling </i></span><span class="s29"><i>val-&gt;T::~T()</i></span></p>
      </td>
      <td valign="middle" class="td13">
        <p class="p8"><span class="s28"><i>no effect</i></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Ensures: </i></span><span class="s28"><i>bool(rhs) == bool(*this)</i></span><span class="s30"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Remarks: If any exception is thrown, the result of the expression </i></span><span class="s29"><i>bool(*this)</i></span><span class="s28"><i> remains unchanged. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s move constructor, the state of </i></span><span class="s29"><i>*rhs.val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s move constructor. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s move assignment, the state of </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> and </i></span><span class="s29"><i>*rhs.val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s move assignment.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Mandates:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>- </i></span><span class="s29"><i>is_same&lt;T,U&gt;</i></span><span class="s28"><i> or is_same&lt;Allocator, AllocatorU&gt; is </i></span><span class="s29"><i>false</i></span><span class="s28"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable&lt;T&amp;, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, AllocatorU&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, AllocatorU&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, AllocatorU&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, AllocatorU&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const U&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, AllocatorU&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, AllocatorU&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, AllocatorU&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, AllocatorU&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, AllocatorU&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, and<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, AllocatorU&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U&gt; basic_optional&amp; operator=(const optional&lt;U&gt;&amp; rhs);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p38"><span class="s2"><i>Effects: The result of the expression </i></span><span class="s31"><i>bool(rhs)</i></span><span class="s2"><i> remains unchanged. See Table</i></span></p>
<p class="p39"><span class="s30"><i>Table — </i></span><span class="s28"><i>basic_optional operator=(const optional&lt;U&gt;&amp;)</i></span><span class="s30"><i> effects</i></span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td14">
        <p class="p40"><span class="s1"><b><i></i></b></span><br></p>
      </td>
      <td valign="middle" class="td15">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> contains a value</i></b></span></p>
      </td>
      <td valign="middle" class="td16">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> does not contain a value</i></b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td14">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> contains a value</i></span></p>
      </td>
      <td valign="middle" class="td15">
        <p class="p8"><span class="s28"><i>assigns </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i> to the contained value</i></span></p>
      </td>
      <td valign="middle" class="td16">
        <p class="p8"><span class="s28"><i>initializes the contained value with </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i>. If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i>.</i></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td14">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> does not contain a value</i></span></p>
      </td>
      <td valign="middle" class="td15">
        <p class="p8"><span class="s28"><i>destroys the contained value by calling </i></span><span class="s29"><i>val-&gt;T::~T()</i></span></p>
      </td>
      <td valign="middle" class="td16">
        <p class="p8"><span class="s28"><i>no effect</i></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Ensures: </i></span><span class="s28"><i>bool(rhs) == bool(*this)</i></span><span class="s30"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Remarks: If any exception is thrown, the result of the expression </i></span><span class="s29"><i>bool(*this)</i></span><span class="s28"><i> remains unchanged. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor, no effect. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment, the state of </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Any allocator propagation in assignment of </i></span><span class="s29"><i>*rhs</i></span><span class="s28"><i> to the contained value will not be reflected in the </i></span><span class="s29"><i>basic_optional</i></span><span class="s28"><i>'s allocator.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Mandates:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, U&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable&lt;T&amp;, U&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, and<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U&gt; basic_optional&amp; operator=(optional&lt;U&gt;&amp;&amp; rhs);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p38"><span class="s2"><i>Effects: See Table</i></span></p>
<p class="p39"><span class="s30"><i>Table — </i></span><span class="s28"><i>basic_optional operator=(optional&lt;U&gt;&amp;&amp;)</i></span><span class="s30"><i> effects</i></span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td17">
        <p class="p40"><span class="s1"><b><i></i></b></span><br></p>
      </td>
      <td valign="middle" class="td18">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> contains a value</i></b></span></p>
      </td>
      <td valign="middle" class="td19">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> does not contain a value</i></b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td17">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> contains a value</i></span></p>
      </td>
      <td valign="middle" class="td18">
        <p class="p8"><span class="s28"><i>assigns </i></span><span class="s29"><i>std::move(*rhs)</i></span><span class="s28"><i> to the contained value</i></span></p>
      </td>
      <td valign="middle" class="td19">
        <p class="p8"><span class="s28"><i>initializes the contained value with </i></span><span class="s29"><i>std::move(*rhs)</i></span><span class="s28"><i>. If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i><span class="Apple-converted-space"> </span></i></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td17">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> does not contain a value</i></span></p>
      </td>
      <td valign="middle" class="td18">
        <p class="p8"><span class="s28"><i>destroys the contained value by calling </i></span><span class="s29"><i>val-&gt;T::~T()</i></span></p>
      </td>
      <td valign="middle" class="td19">
        <p class="p8"><span class="s28"><i>no effect</i></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Ensures: </i></span><span class="s28"><i>bool(rhs) == bool(*this)</i></span><span class="s30"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Remarks: If any exception is thrown, the result of the expression </i></span><span class="s29"><i>bool(*this)</i></span><span class="s28"><i> remains unchanged. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor, the state of </i></span><span class="s29"><i>*rhs.val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor. If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment, the state of </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> and </i></span><span class="s29"><i>*rhs.val</i></span><span class="s28"><i> is determined by the exception safety guarantee of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s assignment.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Any allocator propagation in assignment of </i></span><span class="s29"><i>std::move(*rhs)</i></span><span class="s28"><i> to the contained value will not be reflected in the </i></span><span class="s29"><i>basic_optional</i></span><span class="s28"><i>'s allocator.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Mandates:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable&lt;T&amp;, const U&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_constructible_v&lt;T, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const U&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_convertible_v&lt;const basic_optional&lt;U, Allocator&gt;&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, Allocator&gt;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>,<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, and<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>- </i></span><span class="s28"><i>is_assignable_v&lt;T&amp;, const basic_optional&lt;U, Allocator&gt;&amp;&amp;&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class... Args&gt; T&amp; emplace(Args&amp;&amp;...);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Constraints: </i></span><span class="s28"><i>is_constructible_v&lt;T, Args&amp;&amp;...&gt; </i></span><span class="s30"><i>is true.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: Calls </i></span><span class="s29"><i>*this = nullopt</i></span><span class="s28"><i>. Then initializes the contained value with </i></span><span class="s29"><i>std::forward&lt;Args&gt;(args)....</i></span><span class="s28"><i>. If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Ensures: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Returns: A reference to the new contained value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Throws: Any exception thrown by the selected constructor of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Remarks: If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor, </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> does not contain a value, and the previous </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> (if any) has been destroyed.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U, class... Args&gt; T&amp; emplace(initializer_list&lt;U&gt;, Args&amp;&amp;...);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Constraints: </i></span><span class="s28"><i>is_constructible_v&lt;T, initializer_Â­list&lt;U&gt;&amp;, Args&amp;&amp;...&gt; </i></span><span class="s30"><i>is true.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: Calls </i></span><span class="s29"><i>*this = nullopt</i></span><span class="s28"><i>. Then initializes the contained value with </i></span><span class="s29"><i>il</i></span><span class="s28"><i> and </i></span><span class="s29"><i>std::forward&lt;Args&gt;(args)....</i></span><span class="s28"><i>. If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Ensures: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Returns: A reference to the new contained value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Throws: Any exception thrown by the selected constructor of </i></span><span class="s29"><i>T</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Remarks: If an exception is thrown during the call to </i></span><span class="s29"><i>T</i></span><span class="s28"><i>'s constructor, </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> does not contain a value, and the previous </i></span><span class="s29"><i>*val</i></span><span class="s28"><i> (if any) has been destroyed.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p9"><span class="s1"><i></i></span><br></p>
<h4 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s28"><b><i>Swap [basic.optional.swap]</i></b></span></h4>
<p class="p9"><span class="s1"><i></i></span><br></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>void swap(basic_optional&amp; rhs) noexcept(see below);</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Constraints: Lvalues of type </i></span><span class="s29"><i>T</i></span><span class="s28"><i> shall be swappable and </i></span><span class="s29"><i>is_Â­move_Â­constructible_Â­v&lt;T&gt;</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>PreconditionsL </i></span><span class="s28"><i>allocator_traits&lt;Allocator&gt;::propagate_on_container_swap::value</i></span><span class="s30"><i> is </i></span><span class="s28"><i>true</i></span><span class="s30"><i> or </i></span><span class="s28"><i>get_allocator() == s.get_allocator()</i></span><span class="s30"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Effects: If </i></span><span class="s28"><i>allocator_traits&lt;Allocator&gt;::propagate_on_container_swap</i></span><span class="s30"><i>, calls </i></span><span class="s28"><i>swap(alloc, rhs.alloc)</i></span><span class="s30"><i>. See Table x<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Throws: Any exceptions thrown by the operations in the relevant part of Table x.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p38"><span class="s2"><i>Remarks: The expression inside </i></span><span class="s31"><i>noexcept</i></span><span class="s2"><i> is equivalent to: </i></span><span class="s31"><i>is_nothrow_move_constructible_v&lt;T&gt; ∧∧ is_nothrow_swappable_v&lt;T&gt;</i></span><span class="s2"><i> If any exception is thrown, the results of the expressions </i></span><span class="s31"><i>bool(*this)</i></span><span class="s2"><i> and </i></span><span class="s31"><i>bool(rhs)</i></span><span class="s2"><i> remain unchanged. If an exception is thrown during the call to function </i></span><span class="s31"><i>swap</i></span><span class="s2"><i>, the state of </i></span><span class="s31"><i>*val</i></span><span class="s2"><i> and </i></span><span class="s31"><i>*rhs.val</i></span><span class="s2"><i> is determined by the exception safety guarantee of </i></span><span class="s31"><i>swap</i></span><span class="s2"><i> for lvalues of </i></span><span class="s31"><i>T</i></span><span class="s2"><i>. If an exception is thrown during the call to </i></span><span class="s31"><i>T</i></span><span class="s2"><i>â€™s move constructor, the state of </i></span><span class="s31"><i>*val</i></span><span class="s2"><i> and </i></span><span class="s31"><i>*rhs.val</i></span><span class="s2"><i> is determined by the exception safety guarantee of </i></span><span class="s31"><i>T</i></span><span class="s2"><i>â€™s move constructor.</i></span></p>
<p class="p39"><span class="s30"><i>Table x — </i></span><span class="s28"><i>swap(basic_optional&amp;)</i></span><span class="s30"><i> effects</i></span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td20">
        <p class="p40"><span class="s1"><b><i></i></b></span><br></p>
      </td>
      <td valign="middle" class="td21">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> contains a value</i></b></span></p>
      </td>
      <td valign="middle" class="td21">
        <p class="p41"><span class="s29"><b><i>*this</i></b></span><span class="s28"><b><i> does not contain a value</i></b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td20">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> contains a value</i></span></p>
      </td>
      <td valign="middle" class="td21">
        <p class="p36"><span class="s30"><i>calls </i></span><span class="s28"><i>swap(*(*this), *rhs)</i></span></p>
      </td>
      <td valign="middle" class="td21">
        <p class="p8"><span class="s28"><i>initializes the contained value with </i></span><span class="s29"><i>std::move(*rhs)</i></span><span class="s28"><i> as the constructor argument, followed by </i></span><span class="s29"><i>rhs.val-&gt;T::~T()</i></span><span class="s28"><i>; If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i>. Postcondition is that </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value and </i></span><span class="s29"><i>rhs</i></span><span class="s28"><i> does not contain a value</i></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td20">
        <p class="p8"><span class="s29"><i>rhs</i></span><span class="s28"><i> does not contain a value</i></span></p>
      </td>
      <td valign="middle" class="td21">
        <p class="p8"><span class="s28"><i>initializes the contained value with </i></span><span class="s29"><i>std::move(*(*this))</i></span><span class="s28"><i> as the constructor argument, followed by </i></span><span class="s29"><i>val-&gt;T::~T()</i></span><span class="s28"><i>; If </i></span><span class="s29"><i>uses-alloc</i></span><span class="s28"><i> is </i></span><span class="s29"><i>true</i></span><span class="s28"><i>, initialization is done by uses-allocator construction with allocator </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i>. Postcondition is that </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> does not contain a value and </i></span><span class="s29"><i>rhs</i></span><span class="s28"><i> contains a value</i></span></p>
      </td>
      <td valign="middle" class="td21">
        <p class="p8"><span class="s28"><i>no effect</i></span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p8"><span class="s28"><i>Throws: Any exceptions thrown by the operations in the relevant part of Table x.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p9"><span class="s1"><i></i></span><br></p>
<h4 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s28"><b><i>Observers [basic.optional.observe]</i></b></span></h4>
<p class="p9"><span class="s1"><i></i></span><br></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>const T* operator-&gt;() const;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>T* operator-&gt;();</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Expects: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>val</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Throws: Nothing.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>const T&amp; operator*() const&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>T&amp; operator*() &amp;;();</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Expects: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>*val</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Throws: Nothing.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>T&amp;&amp; operator*() &amp;&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>const T&amp;&amp; operator*() const&amp;&amp;; &amp;;();</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Expects: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: Equivalent to:</i></span><span class="s29"><i> return std::move(*val);</i></span><span class="s28"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>explicit operator bool() const noexcept;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>true</i></span><span class="s28"><i> if and only if contains a value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>bool has_value() const noexcept;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>true</i></span><span class="s28"><i> if and only if contains a value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>const T&amp; value() const&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>T&amp; value() &amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: Equivalent to:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>return bool(*this) ? *val : throw bad_optional_access();</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>T&amp;&amp; value() &amp;&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>const T&amp;&amp; value() const&amp;&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: Equivalent to:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>return bool(*this) ? std::move(*val) : throw bad_optional_access();</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U&gt; T value_or(U&amp;&amp; v) const&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: Equivalent to:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>return bool(*this) ? **this : static_cast&lt;T&gt;(std::forward&lt;U&gt;(v));</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Remarks: If </i></span><span class="s28"><i>is_Â­copy_Â­constructible_Â­v&lt;T&gt; &amp;&amp; is_convertible_v&lt;U&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, the program is ill-formed.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U&gt; T value_or(U&amp;&amp; v) &amp;&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: Equivalent to:<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>return bool(*this) ? std::move(**this) : static_cast&lt;T&gt;(std::forward&lt;U&gt;(v));</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Remarks: If </i></span><span class="s28"><i>is_Â­move_Â­constructible_Â­v&lt;T&gt; &amp;&amp; is_convertible_v&lt;U&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, the program is ill-formed.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U&gt; T value_or(allocator_arg_t, const Allocator&amp; a, U&amp;&amp; v) const&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Constraints: </i></span><span class="s28"><i>uses_allocator&lt;T, Allocator&gt;</i></span><span class="s30"><i> is true;<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: if </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value, returns an object of type </i></span><span class="s29"><i>T</i></span><span class="s28"><i> initialized by uses-allocator construction with allocator </i></span><span class="s29"><i>a</i></span><span class="s28"><i> and </i></span><span class="s29"><i>**this</i></span><span class="s28"><i> as the constructor argument. Otherwise, returns an object of type </i></span><span class="s29"><i>T</i></span><span class="s28"><i> initialized by uses-allocator construction with allocator </i></span><span class="s29"><i>a</i></span><span class="s28"><i> and </i></span><span class="s29"><i>std::forward&lt;U&gt;(v)</i></span><span class="s28"><i> as the constructor argument.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Remarks: If </i></span><span class="s28"><i>is_Â­copy_Â­constructible_Â­v&lt;T&gt; &amp;&amp; is_convertible_v&lt;U&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, the program is ill-formed.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class U&gt; T value_or(allocator_arg_t, const Allocator&amp; a, U&amp;&amp; v) &amp;&amp;;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Constraints: </i></span><span class="s28"><i>uses_allocator&lt;T, Allocator&gt;</i></span><span class="s30"><i> is true;<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: if </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value, returns an object of type </i></span><span class="s29"><i>T</i></span><span class="s28"><i> initialized by uses-allocator construction with allocator </i></span><span class="s29"><i>a</i></span><span class="s28"><i> and </i></span><span class="s29"><i>std::move(**this)</i></span><span class="s28"><i> as the constructor argument. Otherwise, returns an object of type </i></span><span class="s29"><i>T</i></span><span class="s28"><i> initialized by uses-allocator construction with allocator </i></span><span class="s29"><i>a</i></span><span class="s28"><i> and </i></span><span class="s29"><i>std::forward&lt;U&gt;(v)</i></span><span class="s28"><i> as the constructor argument.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Remarks: If </i></span><span class="s28"><i>is_Â­copy_Â­constructible_Â­v&lt;T&gt; &amp;&amp; is_convertible_v&lt;U&amp;&amp;, T&gt;</i></span><span class="s30"><i> is </i></span><span class="s28"><i>false</i></span><span class="s30"><i>, the program is ill-formed.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>allocator_type get_allocator() const noexcept;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s30"><i>Constraints: </i></span><span class="s28"><i>uses_allocator&lt;T, Allocator&gt;</i></span><span class="s30"><i> is true;<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Returns: </i></span><span class="s29"><i>alloc</i></span><span class="s28"><i>.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Throws: nothing.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p9"><span class="s1"><i></i></span><br></p>
<h4 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s28"><b><i>Modifiers [basic.optional.mod]</i></b></span></h4>
<p class="p9"><span class="s1"><i></i></span><br></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>void reset() noexcept;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Effects: If </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> contains a value, calls </i></span><span class="s29"><i>val-&gt;T::~T()</i></span><span class="s28"><i> to destroy the contained value; otherwise no effect.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p8"><span class="s28"><i>Ensures: </i></span><span class="s29"><i>*this</i></span><span class="s28"><i> does not contain a value.<span class="Apple-converted-space"> </span></i></span></p>
<p class="p9"><span class="s1"><i></i></span><br></p>
<h4 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000"><span class="s28"><b><i>Allocator-related traits [basic.optional.traits]</i></b></span></h4>
<p class="p9"><span class="s1"><i></i></span><br></p>
<p class="p10"><span class="s1"><i></i></span><br></p>
<p class="p36"><span class="s28"><i>template&lt;class T, class Allocator&gt;</i></span><span class="s30"><i><span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>struct uses_allocator&lt;T, Allocator&gt; :<span class="Apple-converted-space"> </span></i></span></p>
<p class="p36"><span class="s28"><i>uses_allocator&lt;T, Allocator&gt; { };<span class="Apple-converted-space"> </span></i></span></p>
<p class="p42"><span class="s1"><b></b></span><br></p>
<p class="p42"><span class="s1"><b></b></span><br></p>
<h3 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 14.0px Times; -webkit-text-stroke: #000000"><span class="s1"><b>Add new section after 22.5.3</b></span></h3>
<h3 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 14.0px Times; -webkit-text-stroke: #000000"><span class="s1"><b>Class template basic_optional</b></span><span class="s9"><b> [basic.optional]</b></span></h3>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9"><span class="s1"><b>22.5.x.1</b></span><span class="s10"><b> General</b></span><span class="s1"><b> [basic.optional.general]</b></span></h4>
<p class="p45"><span class="s1">namespace</span><span class="s10"> std </span><span class="s11">{</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> T, class Allocator</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">class</span><span class="s1"> basic_optional </span><span class="s11">{</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">public</span><span class="s14">:</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">using</span><span class="s1"> value_type </span><span class="s14">=</span><span class="s1"> T;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">using</span><span class="s1"> allocator_type </span><span class="s14">=</span><span class="s1"> Allocator;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p48"><span class="s12"><span class="Apple-converted-space">    </span></span><span class="s25"><i>// </i></span><span class="s1"><i>[basic.optional.ctor]</i></span><span class="s25"><i>, constructors</i></span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> basic_optional</span><span class="s11">()</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s1">;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s1">nullopt_t</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s1">;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s1">optional</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s14">...</span><span class="s10"> Args</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s1">in_place_t, Args</span><span class="s14">&amp;&amp;...</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U, </span><span class="s1">class</span><span class="s14">...</span><span class="s10"> Args</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s1">in_place_t, initializer_list</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1">, Args</span><span class="s14">&amp;&amp;...</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U </span><span class="s14">=</span><span class="s10"> T</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s1">U</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> basic_optional </span><span class="s14">&lt;</span><span class="s1">U, Allocator</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s1">basic_optional</span><span class="s14">&lt;</span><span class="s1">U, Allocator</span><span class="s14">&gt;&amp;&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p49"><span class="s1"><i>// allocator-extended constructors</i></span></p>
<p class="p50"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s32"> basic_optional</span><span class="s11">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a</span><span class="s11">)</span><span class="s32">;</span></p>
<p class="p50"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s32"> basic_optional</span><span class="s11">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s32">nullopt_t</span><span class="s11">)</span><span class="s32">;</span></p>
<p class="p51"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s10"> basic_optional</span><span class="s11">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s15">const</span><span class="s10"> optional</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p51"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s10"> basic_optional</span><span class="s11">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s10">optional</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p52"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s14">...</span><span class="s10"> Args</span><span class="s14">&gt;</span></p>
<p class="p51"><span class="s10"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s10"> </span><span class="s15">explicit</span><span class="s10"> basic_optional</span><span class="s11">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s10">in_place_t, Args</span><span class="s14">&amp;&amp;...</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p52"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U, </span><span class="s1">class</span><span class="s14">...</span><span class="s10"> Args</span><span class="s14">&gt;</span></p>
<p class="p53"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s10">allocator_arg_t, const allocator_type&amp; a, </span><span class="s1">in_place_t, initializer_list</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1">, Args</span><span class="s14">&amp;&amp;...</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p52"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U </span><span class="s14">=</span><span class="s10"> T</span><span class="s14">&gt;</span></p>
<p class="p51"><span class="s10"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s10"> </span><span class="s15">explicit</span><span class="s11">(</span><span class="s10"><i>see below</i></span><span class="s11">)</span><span class="s10"> basic_optional</span><span class="s11">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s10">U</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p52"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p53"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s10">allocator_arg_t, const allocator_type&amp; a, </span><span class="s15">const</span><span class="s1"> basic_optional </span><span class="s14">&lt;</span><span class="s1">U, Allocator</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p52"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p53"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s10">allocator_arg_t, const allocator_type&amp; a, </span><span class="s33">basic_optional</span><span class="s14">&lt;</span><span class="s1">U, Allocator</span><span class="s14">&gt;&amp;&amp;</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p54"><span class="s1"></span><br></p>
<p class="p55"><span class="s12"><span class="Apple-converted-space">    </span></span><span class="s25"><i>// </i></span><span class="s1"><i>[basic.optional.dtor]</i></span><span class="s25"><i>, destructor</i></span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s14">~</span><span class="s1">optional</span><span class="s11">()</span><span class="s1">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p48"><span class="s12"><span class="Apple-converted-space">    </span></span><span class="s25"><i>// </i></span><span class="s1"><i>[basic.optional.assign]</i></span><span class="s25"><i>, assignment</i></span></p>
<p class="p56"><span class="s22"><span class="Apple-converted-space">    </span></span><span class="s23">constexpr</span><span class="s22"> basic_optional</span><span class="s14">&amp;</span><span class="s22"> </span><span class="s23">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s22">nullopt_t</span><span class="s11">)</span><span class="s22"> </span><span class="s23">noexcept</span><span class="s22">;</span></p>
<p class="p57"><span class="s22"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s22"> </span><span class="s1">basic_optional</span><span class="s14">&amp;</span><span class="s22"> </span><span class="s15">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s15">const</span><span class="s22"> </span><span class="s1">basic_optional</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s22">;</span></p>
<p class="p57"><span class="s22"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s22"> </span><span class="s1">basic_optional</span><span class="s14">&amp;</span><span class="s22"> </span><span class="s15">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s1">basic_optional</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s22"> </span><span class="s15">noexcept</span><span class="s11">(</span><span class="s22"><i>see below</i></span><span class="s11">)</span><span class="s22">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U </span><span class="s14">=</span><span class="s10"> T</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> basic_optional</span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s10">U</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p56"><span class="s22"><span class="Apple-converted-space">    </span></span><span class="s23">template</span><span class="s14">&lt;</span><span class="s23">class</span><span class="s22"> U</span><span class="s14">&gt;</span><span class="s22"> </span><span class="s23">constexpr</span><span class="s22"> basic_optional</span><span class="s14">&amp;</span><span class="s22"> </span><span class="s23">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s23">const</span><span class="s22"> basic_optional </span><span class="s14">&lt;</span><span class="s22">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s22">;</span></p>
<p class="p56"><span class="s22"><span class="Apple-converted-space">    </span></span><span class="s23">template</span><span class="s14">&lt;</span><span class="s23">class</span><span class="s22"> U</span><span class="s14">&gt;</span><span class="s22"> </span><span class="s23">constexpr</span><span class="s22"> basic_optional</span><span class="s14">&amp;</span><span class="s22"> </span><span class="s23">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s22">basic_optional </span><span class="s14">&lt;</span><span class="s22">U</span><span class="s14">&gt;&amp;&amp;</span><span class="s11">)</span><span class="s22">;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s14">...</span><span class="s1"> Args</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">constexpr</span><span class="s1"> T</span><span class="s14">&amp;</span><span class="s1"> emplace</span><span class="s11">(</span><span class="s1">Args</span><span class="s14">&amp;&amp;...</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> U, </span><span class="s15">class</span><span class="s14">...</span><span class="s1"> Args</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">constexpr</span><span class="s1"> T</span><span class="s14">&amp;</span><span class="s1"> emplace</span><span class="s11">(</span><span class="s1">initializer_list</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1">, Args</span><span class="s14">&amp;&amp;...</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p48"><span class="s12"><span class="Apple-converted-space">    </span></span><span class="s25"><i>// </i></span><span class="s1"><i>[basic.optional.swap]</i></span><span class="s25"><i>, swap</i></span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">void</span><span class="s1"> swap</span><span class="s11">(</span><span class="s22">basic_optional</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p58"><span class="s1"></span><br></p>
<p class="p59"><span class="s34"><i><span class="Apple-converted-space">   </span>// </i><a href="https://eel.is/c++draft/variant#ctor"><span class="s35"><i>[</i></span></a></span><span class="s1"><i>basic.optional.al]</i></span><span class="s34"><i>, allocator</i></span></p>
<p class="p8"><span class="s36"><span class="Apple-converted-space">    </span>allocator_type get_allocator</span><span class="s37">()</span><span class="s36"> </span><span class="s38">const</span><span class="s36">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p48"><span class="s12"><span class="Apple-converted-space">    </span></span><span class="s25"><i>// </i></span><span class="s1"><i>[basic.optional.observe]</i></span><span class="s25"><i>, observers</i></span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> T</span><span class="s14">*</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">-&gt;</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> T</span><span class="s14">*</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">-&gt;</span><span class="s11">()</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">*</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">*</span><span class="s11">()</span><span class="s10"> </span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> T</span><span class="s14">&amp;&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">*</span><span class="s11">()</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">*</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">explicit</span><span class="s10"> </span><span class="s1">operator</span><span class="s10"> </span><span class="s1">bool</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> has_value</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">const</span><span class="s1"> T</span><span class="s14">&amp;</span><span class="s1"> value</span><span class="s11">()</span><span class="s1"> </span><span class="s15">const</span><span class="s1"> </span><span class="s14">&amp;</span><span class="s1">; <span class="Apple-converted-space">                                </span></span><span class="s16"><i>// freestanding-deleted</i></span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> T</span><span class="s14">&amp;</span><span class="s1"> value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">&amp;</span><span class="s1">; <span class="Apple-converted-space">                                            </span></span><span class="s16"><i>// freestanding-deleted</i></span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> T</span><span class="s14">&amp;&amp;</span><span class="s1"> value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1">; <span class="Apple-converted-space">                                          </span></span><span class="s16"><i>// freestanding-deleted</i></span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">const</span><span class="s1"> T</span><span class="s14">&amp;&amp;</span><span class="s1"> value</span><span class="s11">()</span><span class="s1"> </span><span class="s15">const</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1">; <span class="Apple-converted-space">                              </span></span><span class="s16"><i>// freestanding-deleted</i></span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> T value_or</span><span class="s11">(</span><span class="s10">U</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s14">&amp;</span><span class="s10">;</span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> T value_or</span><span class="s11">(</span><span class="s10">U</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p48"><span class="s12"><span class="Apple-converted-space">    </span></span><span class="s25"><i>// </i></span><span class="s1"><i>[basic.optional.mod]</i></span><span class="s25"><i>, modifiers</i></span></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">void</span><span class="s10"> reset</span><span class="s11">()</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p45"><span class="s10"><span class="Apple-converted-space">  </span></span><span class="s1">private</span><span class="s14">:</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span>T </span><span class="s14">*</span><span class="s1">val; <span class="Apple-converted-space">        </span></span><span class="s16"><i>// exposition only</i></span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span>Allocator_type </span><span class="s14">*</span><span class="s1">alloc; <span class="Apple-converted-space">        </span></span><span class="s16"><i>// exposition only</i></span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s11">}</span><span class="s1">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p60"><span class="s1">}</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p61"><span class="s1">Any instance of basic_optional</span><span class="s14">&lt;</span><span class="s1">T, Allocator</span><span class="s14">&gt;</span><span class="s1"> at any given time either contains a value or does not contain a value<a href="https://eel.is/c++draft/optional#optional.general-1.sentence-1"><span class="s39">.</span></a> When an instance of </span><span class="s40">basic_optional</span><span class="s41">&lt;</span><span class="s40">T, Allocator</span><span class="s41">&gt;</span><span class="s1"> <a href="https://eel.is/c++draft/optional#def:contains_a_value,optional"><span class="s39"><i>contains a value</i></span></a>, it means that an object of type T, referred to as the </span><span class="s42">basic_optional</span><span class="s1"> object's <a href="https://eel.is/c++draft/optional#def:contained_value,optional"><span class="s39"><i>contained value</i></span></a>, is allocated within the storage of the basic_optional object. Implementations are not permitted to use additional storage, such as dynamic memory, to allocate its contained value<a href="https://eel.is/c++draft/optional#optional.general-1.sentence-3"><span class="s39">.</span></a> When an object of type </span><span class="s40">basic_optional</span><span class="s41">&lt;</span><span class="s40">T, Allocator</span><span class="s41">&gt;</span><span class="s1"> is contextually converted to </span><span class="s15">bool</span><span class="s1">, the conversion returns </span><span class="s43">true</span><span class="s1"> if the object contains a value; otherwise the conversion returns </span><span class="s43">false</span><span class="s1">.</span></p>
<p class="p62"><span class="s1"></span><br></p>
<p class="p61"><span class="s1">When a </span><span class="s40">basic_optional</span><span class="s41">&lt;</span><span class="s40">T, Allocator</span><span class="s41">&gt;</span><span class="s40"> </span><span class="s1"> object contains a value, member val points to the contained value.</span></p>
<p class="p62"><span class="s1"></span><br></p>
<p class="p61"><span class="s1">T shall be a type other than <i>cv</i> in_place_t or <i>cv</i> nullopt_t that meets the <i>Cpp17Destructible</i> requirements (Table <a href="https://eel.is/c++draft/utility.arg.requirements#tab:cpp17.destructible"><span class="s13">35</span></a>)<a href="https://eel.is/c++draft/optional#optional.general-3.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p62"><span class="s1"></span><br></p>
<p class="p63"><span class="s1">Template argument Allocator shall satisfy the <i>Cpp17Allocator </i>requirements (</span><span class="s44">16.4.4.6.1</span><span class="s1">). A an instance of Allocator is maintained by the basic_optional object during the lifetime of the object or until the allocator is replaced. The allocator instance is set at basic_optional object creation time and may be replaced only via assignment or swap as specified below. The allocator instance is used to pass to uses-allocator construction of a value object as specified below.</span></p>
<p class="p64"><span class="s1"></span><br></p>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; background-color: #21ff06"><span class="s1"><b>22.5.x.2</b></span><span class="s10"><b> Constructors</b></span><span class="s1"><b> [basic.optional.ctor]</b></span></h4>
<p class="p66"><span class="s1">The exposition-only variable template <i>converts-from-any-cvref</i> is used by some constructors for basic_optional.</span></p>
<p class="p67"><span class="s1"></span><br></p>
<p class="p68"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> W</span><span class="s14">&gt;</span></p>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">bool</span><span class="s1"> <i>converts-from-any-cvref</i> </span><span class="s14">=</span><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s16"><i>// exposition only</i></span></p>
<p class="p69"><span class="s1"><span class="Apple-converted-space">  </span>disjunction_v</span><span class="s14">&lt;</span><span class="s1">is_constructible</span><span class="s14">&lt;</span><span class="s1">T, W</span><span class="s14">&amp;&gt;</span><span class="s1">, is_convertible</span><span class="s14">&lt;</span><span class="s1">W</span><span class="s14">&amp;</span><span class="s1">, T</span><span class="s14">&gt;</span><span class="s1">,</span></p>
<p class="p69"><span class="s1"><span class="Apple-converted-space">                </span>is_constructible</span><span class="s14">&lt;</span><span class="s1">T, W</span><span class="s14">&gt;</span><span class="s1">, is_convertible</span><span class="s14">&lt;</span><span class="s1">W, T</span><span class="s14">&gt;</span><span class="s1">,</span></p>
<p class="p69"><span class="s1"><span class="Apple-converted-space">                </span>is_constructible</span><span class="s14">&lt;</span><span class="s1">T, </span><span class="s15">const</span><span class="s1"> W</span><span class="s14">&amp;&gt;</span><span class="s1">, is_convertible</span><span class="s14">&lt;</span><span class="s15">const</span><span class="s1"> W</span><span class="s14">&amp;</span><span class="s1">, T</span><span class="s14">&gt;</span><span class="s1">,</span></p>
<p class="p69"><span class="s1"><span class="Apple-converted-space">                </span>is_constructible</span><span class="s14">&lt;</span><span class="s1">T, </span><span class="s15">const</span><span class="s1"> W</span><span class="s14">&gt;</span><span class="s1">, is_convertible</span><span class="s14">&lt;</span><span class="s15">const</span><span class="s1"> W, T</span><span class="s14">&gt;&gt;</span><span class="s1">;</span></p>
<p class="p70"><span class="s1"></span><br></p>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> basic_optional</span><span class="s11">()</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s1">;</span></p>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s1">nullopt_t</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s1">;</span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> does not contain a value<a href="https://eel.is/c++draft/optional#ctor-2.sentence-1"><span class="s39">.</span></a>.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: alloc is default initialised. No contained value is initialized<a href="https://eel.is/c++draft/optional#ctor-3.sentence-1"><span class="s39">.</span></a> If Allocator’s default construct is a constexpr construct these constructors are constexpr constructors (<a href="https://eel.is/c++draft/dcl.constexpr"><span class="s13">[dcl.constexpr]</span></a>)<a href="https://eel.is/c++draft/optional#ctor-3.sentence-2"><span class="s39">.</span></a></span></p>
<p class="p70"><span class="s1"></span><br></p>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> basic_optional</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> basic_optional</span><span class="s14">&amp;</span><span class="s1"> rhs</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p71"><span class="s39"><i>Effects</i>: </span><span class="s1">If allocator_traits&lt;Allocator&gt;::is_always_equal::value is true, alloc is default-initialized. Otherwise, alloc is direct-initialized with an allocator_traits&lt;Allocator&gt;::select_on_container_copy_construction(rhs.get_allocator()). </span><span class="s39">If rhs contains a value, direct-non-list-initializes the contained value with </span><span class="s41">*</span><span class="s39">rhs</span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1">.</span></p>
<p class="p66"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: This constructor is defined as deleted unless is_copy_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">. This constructor is trivial if :</span></p>
<p class="p66"><span class="s1"><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>- </span><span class="s40">is_trivially_copy_constructible_v</span><span class="s41">&lt;</span><span class="s40">T</span><span class="s41">&gt;</span><span class="s40"> is </span><span class="s45">true</span><span class="s40">,<span class="Apple-converted-space"> </span></span></p>
<p class="p71"><span class="s39"><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>- </span><span class="s1">allocator_traits&lt;Allocator&gt;::is_always_equal::value is true, and</span></p>
<p class="p71"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>- is_trivially_copy_constructible_v&lt;Allocator&gt; is true</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#lib:optional,constructor__">🔗<span class="s46"></span></a></span></p>
<p class="p73"><span class="s15">constexpr</span><span class="s22"> </span><span class="s1">basic_optional</span><span class="s11">(</span><span class="s22">optional</span><span class="s14">&amp;&amp;</span><span class="s22"> rhs</span><span class="s11">)</span><span class="s22"> </span><span class="s1">basic_optional</span><span class="s11">(</span><span class="s22"><i>see below</i></span><span class="s11">)</span><span class="s22">;</span></p>
<p class="p66"><span class="s1"><i>Constraints</i>: is_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span></p>
<p class="p66"><span class="s1"><i>Effects</i>:</span><span class="s39"> alloc is direct-initialized with w.get_allocator().<span class="Apple-converted-space"> </span></span><span class="s1"> If rhs contains a value, direct-non-list-initializes the contained value with std</span><span class="s14"> :: </span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s1">rhs</span><span class="s11">)<a href="https://eel.is/c++draft/optional#ctor-9.sentence-1"><span class="s47">.</span></a></span><span class="s1"> rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> is unchanged</span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1">.</span></p>
<p class="p66"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: The exception specification is equivalent to is_nothrow_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1">. </span><span class="s40">This constructor is trivial if :</span></p>
<p class="p66"><span class="s1"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>- is_trivially_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">, a</span><span class="s39">nd</span></p>
<p class="p74"><span class="s17"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>- is_trivially_move_constructible_v&lt;Allocator&gt; is true</span></p>
<p class="p75"><span class="s1"></span><br></p>
<p class="p69"><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s14">...</span><span class="s1"> Args</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s1"> </span><span class="s22">basic_optional</span><span class="s11">(</span><span class="s1">in_place_t, Args</span><span class="s14">&amp;&amp;...</span><span class="s1"> args</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p66"><span class="s1"><i>Constraints</i>: is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, Args</span><span class="s14">...&gt;</span><span class="s1"> is </span><span class="s43">true<a href="https://eel.is/c++draft/optional#ctor-13.sentence-1"><span class="s10">.</span></a></span></p>
<p class="p71"><span class="s39"><i>Effects</i>: </span><span class="s1">alloc is default-initialized.<span class="Apple-converted-space">  </span>The contained value is constructed by uses-allocator construction with allocator </span><span class="s27">alloc</span><span class="s1"> and std</span><span class="s27"> :: </span><span class="s1">forward</span><span class="s27">&lt;</span><span class="s1">Args</span><span class="s27">&gt;</span><span class="s48">(</span><span class="s1">args</span><span class="s48">)</span><span class="s27">...</span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value<a href="https://eel.is/c++draft/optional#ctor-15.sentence-1"><span class="s39">.</span></a>.</span></p>
<p class="p66"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: If </span><span class="s39">Allocator’s default constructor and </span><span class="s1">T's selected constructor are constexpr constructors, this constructor is a constexpr constructor.</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p76"><span class="s1"></span><br></p>
<p class="p68"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U, </span><span class="s1">class</span><span class="s14">...</span><span class="s10"> Args</span><span class="s14">&gt;</span></p>
<p class="p69"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s1"> </span><span class="s22">basic_optional</span><span class="s11">(</span><span class="s1">in_place_t, initializer_list</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1"> il, Args</span><span class="s14">&amp;&amp;...</span><span class="s1"> args</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p66"><span class="s1"><i>Constraints</i>: is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, initializer_list</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;</span><span class="s1">, Args</span><span class="s14">...&gt;</span><span class="s1"> is </span><span class="s43">true<a href="https://eel.is/c++draft/optional#ctor-18.sentence-1"><span class="s10">.</span></a></span></p>
<p class="p77"><span class="s47"><i>Effects</i>: </span><span class="s1">alloc is default-initialized.<span class="Apple-converted-space">  </span>The contained value is constructed by uses-allocator construction with allocator alloc and il, std :: forward&lt;Args&gt;(args)...</span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value<a href="https://eel.is/c++draft/optional#ctor-20.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p66"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: </span><span class="s40">If </span><span class="s39">Allocator’s default constructor and </span><span class="s40">T's selected constructor are constexpr constructors, this constructor is a constexpr constructor.</span></p>
<p class="p78"><span class="s1"></span><br></p>
<p class="p79"><span class="s1"></span><br></p>
<p class="p79"><span class="s1"></span><br></p>
<p class="p80"><span class="s23">template</span><span class="s14">&lt;</span><span class="s23">class</span><span class="s22"> U </span><span class="s14">=</span><span class="s22"> T</span><span class="s14">&gt;</span><span class="s22"> </span><span class="s23">constexpr</span><span class="s22"> </span><span class="s23">explicit</span><span class="s11">(</span><span class="s22"><i>see below</i></span><span class="s11">)</span><span class="s22"> basic_optional</span><span class="s11">(</span><span class="s22">U</span><span class="s14">&amp;&amp;</span><span class="s22"> v</span><span class="s11">)</span><span class="s22">;</span></p>
<p class="p66"><span class="s1"><i>Constraints</i>:</span></p>
<p class="p66"><span class="s1"><span class="Apple-tab-span">	</span>- is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">,,</span></p>
<p class="p66"><span class="s1"><span class="Apple-tab-span">	</span>- is_same_v</span><span class="s14">&lt;</span><span class="s1">remove_cvref_t</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1">, in_place_t</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">,</span></p>
<p class="p66"><span class="s40"><span class="Apple-tab-span">	</span>- is_same_v</span><span class="s41">&lt;</span><span class="s40">remove_cvref_t</span><span class="s41">&lt;</span><span class="s40">U</span><span class="s41">&gt;</span><span class="s40">, allocator_arg_t</span><span class="s41">&gt;</span><span class="s40"> is </span><span class="s45">false</span><span class="s40">,</span></p>
<p class="p66"><span class="s1"><span class="Apple-tab-span">	</span>- is_same_v</span><span class="s14">&lt;</span><span class="s1">remove_cvref_t</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1">, </span><span class="s40">basic_optional</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">, and</span></p>
<p class="p66"><span class="s1"><span class="Apple-tab-span">	</span>- if T is <i>cv</i> </span><span class="s15">bool</span><span class="s1">, remove_cvref_t</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1"> is not a specialization of basic_optional<a href="https://eel.is/c++draft/optional#ctor-23.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p77"><span class="s47"><i>Effects</i>: </span><span class="s1">alloc is default-initialized.<span class="Apple-converted-space">  </span>The contained value is constructed by uses-allocator construction with allocator alloc and std :: forward&lt;U&gt;(v).</span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value<a href="https://eel.is/c++draft/optional#ctor-25.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p66"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T<a href="https://eel.is/c++draft/optional#ctor-26.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p81"><span class="s49"><i>Remarks</i>: </span><span class="s17">If </span><span class="s50">Allocator’s default constructor and </span><span class="s17">T's selected constructor are constexpr constructors, this constructor is a constexpr constructor.</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p80"><span class="s23">template</span><span class="s14">&lt;</span><span class="s23">class</span><span class="s22"> U</span><span class="s14">&gt;</span><span class="s22"> </span><span class="s23">constexpr</span><span class="s22"> </span><span class="s23">explicit</span><span class="s11">(</span><span class="s22"><i>see below</i></span><span class="s11">)</span><span class="s22"> basic_optional</span><span class="s11">(</span><span class="s23">const</span><span class="s22"> basic_optional</span><span class="s42"> </span><span class="s14">&lt;</span><span class="s22">U, Allocator</span><span class="s14">&gt;&amp;</span><span class="s22"> rhs</span><span class="s11">)</span><span class="s22">;</span></p>
<p class="p66"><span class="s1"><i>Constraints</i>:</span></p>
<p class="p66"><span class="s1"><span class="Apple-tab-span">	</span>- is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, </span><span class="s15">const</span><span class="s1"> U</span><span class="s14">&amp;&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">, and</span></p>
<p class="p66"><span class="s1"><span class="Apple-tab-span">	</span>- if T is not <i>cv</i> </span><span class="s15">bool</span><span class="s1">, <i>converts-from-any-cvref</i></span><span class="s14">&lt;</span><span class="s1">T, </span><span class="s42">basic_optional </span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&gt;</span><span class="s1"> is </span><span class="s43">false<a href="https://eel.is/c++draft/optional#ctor-28.sentence-1"><span class="s10">.</span></a></span></p>
<p class="p77"><span class="s47"><i>Effects</i>: </span><span class="s1">alloc is default-initialized.<span class="Apple-converted-space">  </span></span><span class="s47">If rhs contains a value, t</span><span class="s1">he contained value is constructed by uses-allocator construction with allocator alloc and</span><span class="s41">*</span><span class="s47">rhs<a href="https://eel.is/c++draft/optional#ctor-29.sentence-1"><span class="s32">.</span></a></span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1">.</span></p>
<p class="p66"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: The expression inside </span><span class="s15">explicit</span><span class="s1"> is equivalent to:</span></p>
<p class="p46"><span class="s20"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>!</span><span class="s17">is_convertible_v</span><span class="s20">&lt;</span><span class="s18">const</span><span class="s17"> U</span><span class="s20">&amp;</span><span class="s17">, T</span><span class="s20">&gt;</span></p>
<p class="p78"><span class="s1"></span><br></p>
<p class="p69"><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> U</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">explicit</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1"> </span><span class="s22">basic_optional</span><span class="s11">(</span><span class="s1">optional</span><span class="s14">&lt;</span><span class="s1">U, Allocator</span><span class="s14">&gt;&amp;&amp;</span><span class="s1"> rhs</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p66"><span class="s1"><i>Constraints</i>:</span></p>
<p class="p66"><span class="s1"><span class="Apple-tab-span">	</span>- is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">, and</span></p>
<p class="p66"><span class="s1"><span class="Apple-tab-span">	</span>- if T is not <i>cv</i> </span><span class="s15">bool</span><span class="s1">, <i>converts-from-any-cvref</i></span><span class="s14">&lt;</span><span class="s1">T, </span><span class="s42">basic_optional </span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">.</span></p>
<p class="p71"><span class="s39"><i>Effects</i>: </span><span class="s22">alloc is default-initialized.<span class="Apple-converted-space">  </span></span><span class="s39">If rhs contains a value, t</span><span class="s1">he contained value is constructed by uses-allocator construction with allocator alloc</span><span class="s39">std</span><span class="s41"> :: </span><span class="s39">move</span><span class="s51">(</span><span class="s41">*</span><span class="s39">rhs</span><span class="s51">)<a href="https://eel.is/c++draft/optional#ctor-34.sentence-1"><span class="s10">.</span></a></span><span class="s39"> rhs</span><span class="s41">.</span><span class="s39">has_value</span><span class="s51">()</span><span class="s39"> is unchanged.</span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1">.</span></p>
<p class="p66"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: The expression inside </span><span class="s15">explicit</span><span class="s1"> is equivalent to:</span></p>
<p class="p69"><span class="s14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>!</span><span class="s1">is_convertible_v</span><span class="s14">&lt;</span><span class="s1">U, T</span><span class="s14">&gt;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p82"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s23">constexpr</span><span class="s32"> basic_optional</span><span class="s52">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a</span><span class="s52">)</span><span class="s32">;</span></p>
<p class="p82"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s23">constexpr</span><span class="s32"> basic_optional</span><span class="s52">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s32">nullopt_t</span><span class="s52">)</span><span class="s32">;</span></p>
<p class="p82"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s23">constexpr</span><span class="s32"> basic_optional</span><span class="s52">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s23">const</span><span class="s32"> optional</span><span class="s53">&amp;</span><span class="s52">)</span><span class="s32">;</span></p>
<p class="p82"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s23">constexpr</span><span class="s32"> basic_optional</span><span class="s52">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s32">optional</span><span class="s53">&amp;&amp;</span><span class="s52">)</span><span class="s32">;</span></p>
<p class="p83"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s53">&lt;</span><span class="s1">class</span><span class="s53">...</span><span class="s32"> Args</span><span class="s53">&gt;</span></p>
<p class="p82"><span class="s32"><span class="Apple-converted-space">      </span></span><span class="s23">constexpr</span><span class="s32"> </span><span class="s23">explicit</span><span class="s32"> basic_optional</span><span class="s52">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s32">in_place_t, Args</span><span class="s53">&amp;&amp;...</span><span class="s52">)</span><span class="s32">;</span></p>
<p class="p83"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s53">&lt;</span><span class="s1">class</span><span class="s32"> U, </span><span class="s1">class</span><span class="s53">...</span><span class="s32"> Args</span><span class="s53">&gt;</span></p>
<p class="p73"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s23">constexpr</span><span class="s1"> </span><span class="s23">explicit</span><span class="s1"> basic_optional</span><span class="s52">(</span><span class="s32">allocator_arg_t, const allocator_type&amp; a, </span><span class="s1">in_place_t, initializer_list</span><span class="s53">&lt;</span><span class="s1">U</span><span class="s53">&gt;</span><span class="s1">, Args</span><span class="s53">&amp;&amp;...</span><span class="s52">)</span><span class="s1">;</span></p>
<p class="p83"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s53">&lt;</span><span class="s1">class</span><span class="s32"> U </span><span class="s53">=</span><span class="s32"> T</span><span class="s53">&gt;</span></p>
<p class="p82"><span class="s32"><span class="Apple-converted-space">      </span></span><span class="s23">constexpr</span><span class="s32"> </span><span class="s23">explicit</span><span class="s52">(</span><span class="s32"><i>see below</i></span><span class="s52">)</span><span class="s32"> basic_optional</span><span class="s52">(</span><span class="s1">allocator_arg_t, const allocator_type&amp; a, </span><span class="s32">U</span><span class="s53">&amp;&amp;</span><span class="s52">)</span><span class="s32">;</span></p>
<p class="p83"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s53">&lt;</span><span class="s1">class</span><span class="s32"> U</span><span class="s53">&gt;</span></p>
<p class="p73"><span class="s1"><span class="Apple-converted-space">      </span></span><span class="s23">constexpr</span><span class="s1"> </span><span class="s23">explicit</span><span class="s52">(</span><span class="s1"><i>see below</i></span><span class="s52">)</span><span class="s1"> basic_optional</span><span class="s52">(</span><span class="s32">allocator_arg_t, const allocator_type&amp; a, </span><span class="s23">const</span><span class="s1"> basic_optional </span><span class="s53">&lt;</span><span class="s1">U, Allocator</span><span class="s53">&gt;&amp;</span><span class="s52">)</span><span class="s1">;</span></p>
<p class="p83"><span class="s32"><span class="Apple-converted-space">    </span></span><span class="s1">template</span><span class="s53">&lt;</span><span class="s1">class</span><span class="s32"> U</span><span class="s53">&gt;</span></p>
<p class="p57"><span class="s17"><span class="Apple-converted-space">      </span></span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">explicit</span><span class="s55">(</span><span class="s17"><i>see below</i></span><span class="s55">)</span><span class="s17"> basic_optional</span><span class="s55">(</span><span class="s56">allocator_arg_t, const allocator_type&amp; a, </span><span class="s17">basic_optional</span><span class="s57">&lt;</span><span class="s17">U, Allocator</span><span class="s57">&gt;&amp;&amp;</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p74"><span class="s36"><span class="Apple-tab-span">	</span><i>Effects</i>: Behaves the same as non allocator extended version of the constructor except it initializes alloc with the specified allocator before initializing the alternative, if any, by uses-allocator construction.</span></p>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; min-height: 16.0px"><span class="s1"><b></b></span><br></h4>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; background-color: #21ff06"><span class="s1"><b>22.5.x.3</b></span><span class="s10"><b> Destructor</b></span><span class="s1"><b>[basic.optional.dtor]</b></span></h4>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> </span><span class="s14">~basic_</span><span class="s1">optional</span><span class="s11">()</span><span class="s1">;</span></p>
<p class="p66"><span class="s1"><i>Effects</i>: If is_trivially_destructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">!=</span><span class="s1"> </span><span class="s43">true</span><span class="s1"> and </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value, calls</span></p>
<p class="p69"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>val</span><span class="s14">-&gt;</span><span class="s1">T</span><span class="s14">::~</span><span class="s1">T</span><span class="s11">()</span></p>
<p class="p85"><span class="s17"><i>Remarks</i>: If is_trivially_destructible_v</span><span class="s20">&lt;</span><span class="s17">T</span><span class="s20">&gt;</span><span class="s17"> is </span><span class="s58">true</span><span class="s17">, then this destructor is trivial</span></p>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; min-height: 16.0px"><span class="s1"><b></b></span><br></h4>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9"><span class="s1"><b>22.5.x.4</b></span><span class="s10"><b> Assignment</b></span><span class="s1"><b> [basic.optional.assign]</b></span></h4>
<p class="p78"><span class="s1"></span><br></p>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> </span><span class="s14">basic_</span><span class="s1">optional </span><span class="s14">&lt;</span><span class="s1">T, Allocator</span><span class="s14">&gt;&amp;</span><span class="s1"> </span><span class="s15">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s1">nullopt_t</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s1">;</span></p>
<p class="p66"><span class="s1"><i>Effects</i>: If </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value, calls val</span><span class="s14">-&gt;</span><span class="s1">T</span><span class="s14"> :: ~</span><span class="s1">T</span><span class="s11">()</span><span class="s1"> to destroy the contained value; otherwise no effect</span></p>
<p class="p66"><span class="s1"><i>Postconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> does not contain a value</span></p>
<p class="p85"><span class="s17"><i>Returns</i>: </span><span class="s20">*</span><span class="s18">this</span></p>
<p class="p78"><span class="s1"></span><br></p>
<p class="p57"><span class="s15">cons</span><span class="s59">texpr</span><span class="s60"> </span><span class="s61">basic_</span><span class="s62">optional </span><span class="s63">&lt;</span><span class="s60">T, Allocator</span><span class="s63">&gt;&lt;</span><span class="s60">T</span><span class="s63">&gt;&amp;</span><span class="s60"> </span><span class="s59">operator</span><span class="s63">=</span><span class="s64">(</span><span class="s59">const</span><span class="s60"> </span><span class="s61">basic_</span><span class="s62">optional</span><span class="s63">&amp;</span><span class="s60"> rhs</span><span class="s64">)</span><span class="s60">;</span></p>
<p class="p85"><span class="s1"><i>Effects</i>: See Table x</span></p>
<p class="p86"><span class="s2"></span><br></p>
<p class="p41"><span class="s28">Table — basic_optional operator=(const basic_optional&amp; rhs) effects</span></p>
<table cellspacing="0" cellpadding="0" class="t1">
  <tbody>
    <tr>
      <td valign="middle" class="td22">
        <p class="p40"><span class="s1"><b></b></span><br></p>
      </td>
      <td valign="middle" class="td23">
        <p class="p41"><span class="s28"><b>*this contains a value</b></span></p>
      </td>
      <td valign="middle" class="td24">
        <p class="p41"><span class="s28"><b>*this does not contain a value</b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td22">
        <p class="p8"><span class="s28">rhs contains a value</span></p>
      </td>
      <td valign="middle" class="td23">
        <p class="p8"><span class="s28">If allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment ::value and this-&gt;get_allocator() != rhs-&gt;get_allocator()is true :<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">destroys the contained value by calling val-&gt;T::~T(),<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">propagates the allocator, and<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">initializes the contained value with *rhs by uses-allocator construction with allocator alloc<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">otherwise :<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">assigns *rhs to the contained value</span></p>
      </td>
      <td valign="middle" class="td24">
        <p class="p8"><span class="s28">If allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment and this-&gt;get_allocator() != rhs-&gt;get_allocator()is true, propagates the allocator.<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">Initializes the contained value with *rhs. If uses-alloc is true, initialization is done by uses-allocator construction with allocator <i>alloc</i><span class="Apple-converted-space"> </span></span></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td22">
        <p class="p8"><span class="s28">rhs does not contain a value</span></p>
      </td>
      <td valign="middle" class="td23">
        <p class="p8"><span class="s28">If allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment and this-&gt;get_allocator() != rhs-&gt;get_allocator()is true, propagates the allocator.<span class="Apple-converted-space"> </span></span></p>
        <p class="p8"><span class="s28">Destroys the contained value by calling val-&gt;T::~T()</span></p>
      </td>
      <td valign="middle" class="td24">
        <p class="p8"><span class="s28">If allocator_traits&lt;Allocator&gt;::propagate_on_container_copy_assignment and this-&gt;get_allocator() != rhs-&gt;get_allocator()is true, propagates the allocator.</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p10"><span class="s1"></span><br></p>
<p class="p87"><span class="s1"></span><br></p>
<p class="p85"><span class="s1"><i>Postconditions</i>: rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()<a href="https://eel.is/c++draft/optional#assign-5.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-6">6<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3659">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Returns</i>: </span><span class="s14">*</span><span class="s15">this<a href="https://eel.is/c++draft/optional#assign-6.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-7">7<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3663">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Remarks</i>: If any exception is thrown, the result of the expression </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> remains unchanged<a href="https://eel.is/c++draft/optional#assign-7.sentence-1"><span class="s39">.</span></a> If an exception is thrown during the call to T's copy constructor, no effect<a href="https://eel.is/c++draft/optional#assign-7.sentence-2"><span class="s39">.</span></a> If an exception is thrown during the call to T's copy assignment, the state of its contained value is as defined by the exception safety guarantee of T's copy assignment<a href="https://eel.is/c++draft/optional#assign-7.sentence-3"><span class="s39">.</span></a> This operator is defined as deleted unless is_copy_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1"> and is_copy_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true<a href="https://eel.is/c++draft/optional#assign-7.sentence-4"><span class="s10">.</span></a></span><span class="s1"> If is_trivially_copy_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1"> is_trivially_copy_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1"> is_trivially_destructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">, this assignment operator is trivial<a href="https://eel.is/c++draft/optional#assign-7.sentence-5"><span class="s39">.</span></a></span></p>
<p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#lib:operator=,optional__">🔗<span class="s46"></span></a></span></p>
<p class="p46"><span class="s15">constexpr</span><span class="s1"> optional</span><span class="s14">&amp;</span><span class="s1"> </span><span class="s15">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s1">optional</span><span class="s14">&amp;&amp;</span><span class="s1"> rhs</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-8">8<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3684">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Constraints</i>: is_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1"> and is_move_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true<a href="https://eel.is/c++draft/optional#assign-8.sentence-1"><span class="s10">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-9">9<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3689">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Effects</i>: See Table <a href="https://eel.is/c++draft/optional#tab:optional.assign.move"><span class="s13">59</span></a><a href="https://eel.is/c++draft/optional#assign-9.sentence-1"><span class="s39">.</span></a> The result of the expression rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> remains unchanged<a href="https://eel.is/c++draft/optional#assign-9.sentence-2"><span class="s39">.</span></a></span></p>
<p class="p89"><span class="s1">Table <a href="https://eel.is/c++draft/optional#tab:optional.assign.move"><span class="s13">59</span></a>: optional</span><span class="s14"> :: </span><span class="s15">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s1">optional</span><span class="s14">&amp;&amp;</span><span class="s11">)</span><span class="s1"> effects</span><span class="s67"> <a href="https://eel.is/c++draft/tab:optional.assign.move"><span class="s13">[tab:optional.assign.move]</span></a></span></p>
<table cellspacing="0" cellpadding="0" class="t2">
  <tbody>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.move-row-1">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td25">
        <p class="p90"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s14"><b>*</b></span><span class="s15"><b>this</b></span><span class="s1"><b> contains a value</b></span></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s14"><b>*</b></span><span class="s15"><b>this</b></span><span class="s1"><b> does not contain a value</b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.move-row-2">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td28">
        <p class="p20"><span class="s1"><b>rhs contains a value</b></span></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td29">
        <p class="p20"><span class="s1">assigns std</span><span class="s14"> :: </span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s1">rhs</span><span class="s11">)</span><span class="s1"> to the contained value</span></p>
      </td>
      <td valign="top" class="td29">
        <p class="p20"><span class="s1">direct-non-list-initializes the contained value with std</span><span class="s14"> :: </span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s1">rhs</span><span class="s11">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.move-row-3">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td30">
        <p class="p20"><span class="s1"><b>rhs does not contain a value</b></span></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s1">destroys the contained value by calling val</span><span class="s14">-&gt;</span><span class="s1">T</span><span class="s14"> :: ~</span><span class="s1">T</span><span class="s11">()</span></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s1">no effect</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-10">10<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3707">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Postconditions</i>: rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()<a href="https://eel.is/c++draft/optional#assign-10.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-11">11<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3711">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Returns</i>: </span><span class="s14">*</span><span class="s15">this<a href="https://eel.is/c++draft/optional#assign-11.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-12">12<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3715">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Remarks</i>: The exception specification is equivalent to:</span></p>
<p class="p46"><span class="s1">is_nothrow_move_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1"> is_nothrow_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-13">13<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3722">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1">If any exception is thrown, the result of the expression </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> remains unchanged<a href="https://eel.is/c++draft/optional#assign-13.sentence-1"><span class="s39">.</span></a> If an exception is thrown during the call to T's move constructor, the state of </span><span class="s14">*</span><span class="s1">rhs</span><span class="s14">.</span><span class="s1">val is determined by the exception safety guarantee of T's move constructor<a href="https://eel.is/c++draft/optional#assign-13.sentence-2"><span class="s39">.</span></a> If an exception is thrown during the call to T's move assignment, the state of </span><span class="s14">*</span><span class="s1">val and </span><span class="s14">*</span><span class="s1">rhs</span><span class="s14">.</span><span class="s1">val is determined by the exception safety guarantee of T's move assignment<a href="https://eel.is/c++draft/optional#assign-13.sentence-3"><span class="s39">.</span></a> If is_trivially_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1"> is_trivially_move_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1"> is_trivially_destructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">, this assignment operator is trivial<a href="https://eel.is/c++draft/optional#assign-13.sentence-4"><span class="s39">.</span></a></span></p>
<p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#lib:operator=,optional___">🔗<span class="s46"></span></a></span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U </span><span class="s14">=</span><span class="s10"> T</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s10">U</span><span class="s14">&amp;&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-14">14<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3740">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Constraints</i>: is_same_v</span><span class="s14">&lt;</span><span class="s1">remove_cvref_t</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1">, optional</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">, conjunction_v</span><span class="s14">&lt;</span><span class="s1">is_scalar</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1">, is_same</span><span class="s14">&lt;</span><span class="s1">T, decay_t</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&gt;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">, is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">, and is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, U</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true<a href="https://eel.is/c++draft/optional#assign-14.sentence-1"><span class="s10">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-15">15<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3747">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Effects</i>: If </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value, assigns std</span><span class="s14"> :: </span><span class="s1">forward</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">v</span><span class="s11">)</span><span class="s1"> to the contained value; otherwise direct-non-list-initializes the contained value with std</span><span class="s14"> :: </span><span class="s1">forward</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">v</span><span class="s11">)<a href="https://eel.is/c++draft/optional#assign-15.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-16">16<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3751">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Postconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value<a href="https://eel.is/c++draft/optional#assign-16.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-17">17<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3755">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Returns</i>: </span><span class="s14">*</span><span class="s15">this<a href="https://eel.is/c++draft/optional#assign-17.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-18">18<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3759">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Remarks</i>: If any exception is thrown, the result of the expression </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> remains unchanged<a href="https://eel.is/c++draft/optional#assign-18.sentence-1"><span class="s39">.</span></a> If an exception is thrown during the call to T's constructor, the state of v is determined by the exception safety guarantee of T's constructor<a href="https://eel.is/c++draft/optional#assign-18.sentence-2"><span class="s39">.</span></a> If an exception is thrown during the call to T's assignment, the state of </span><span class="s14">*</span><span class="s1">val and v is determined by the exception safety guarantee of T's assignment<a href="https://eel.is/c++draft/optional#assign-18.sentence-3"><span class="s39">.</span></a></span></p>
<p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#lib:operator=,optional____">🔗<span class="s46"></span></a></span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> rhs</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-19">19<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3770">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Constraints</i>:</span></p>
<ul class="ul1">
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-19.1"><span class="s19">(19.1)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, </span><span class="s15">const</span><span class="s1"> U</span><span class="s14">&amp;&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-19.2"><span class="s19">(19.2)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> U</span><span class="s14">&amp;&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-19.3"><span class="s19">(19.3)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
<i>converts-from-any-cvref</i></span><span class="s14">&lt;</span><span class="s1">T, optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-19.4"><span class="s19">(19.4)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-19.5"><span class="s19">(19.5)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&amp;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-19.6"><span class="s19">(19.6)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">, and</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-19.7"><span class="s19">(19.7)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&amp;&gt;</span><span class="s1"> is </span><span class="s43">false<a href="https://eel.is/c++draft/optional#assign-19.sentence-1"><span class="s10">.</span></a></span></li>
</ul>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-20">20<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3782">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Effects</i>: See Table <a href="https://eel.is/c++draft/optional#tab:optional.assign.copy.templ"><span class="s13">60</span></a><a href="https://eel.is/c++draft/optional#assign-20.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p89"><span class="s1">Table <a href="https://eel.is/c++draft/optional#tab:optional.assign.copy.templ"><span class="s13">60</span></a>: optional</span><span class="s14"> :: </span><span class="s15">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;</span><span class="s11">)</span><span class="s1"> effects</span><span class="s67"> <a href="https://eel.is/c++draft/tab:optional.assign.copy.templ"><span class="s13">[tab:optional.assign.copy.templ]</span></a></span></p>
<table cellspacing="0" cellpadding="0" class="t2">
  <tbody>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.copy.templ-row-1">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td25">
        <p class="p90"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s14"><b>*</b></span><span class="s15"><b>this</b></span><span class="s1"><b> contains a value</b></span></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s14"><b>*</b></span><span class="s15"><b>this</b></span><span class="s1"><b> does not contain a value</b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.copy.templ-row-2">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td28">
        <p class="p20"><span class="s1"><b>rhs contains a value</b></span></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td29">
        <p class="p20"><span class="s1">assigns </span><span class="s14">*</span><span class="s1">rhs to the contained value</span></p>
      </td>
      <td valign="top" class="td29">
        <p class="p20"><span class="s1">direct-non-list-initializes the contained value with </span><span class="s14">*</span><span class="s1">rhs</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.copy.templ-row-3">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td30">
        <p class="p20"><span class="s1"><b>rhs does not contain a value</b></span></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s1">destroys the contained value by calling val</span><span class="s14">-&gt;</span><span class="s1">T</span><span class="s14"> :: ~</span><span class="s1">T</span><span class="s11">()</span></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s1">no effect</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-21">21<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3799">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Postconditions</i>: rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()<a href="https://eel.is/c++draft/optional#assign-21.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-22">22<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3803">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Returns</i>: </span><span class="s14">*</span><span class="s15">this<a href="https://eel.is/c++draft/optional#assign-22.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-23">23<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3807">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Remarks</i>: If any exception is thrown, the result of the expression </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> remains unchanged<a href="https://eel.is/c++draft/optional#assign-23.sentence-1"><span class="s39">.</span></a> If an exception is thrown during the call to T's constructor, the state of </span><span class="s14">*</span><span class="s1">rhs</span><span class="s14">.</span><span class="s1">val is determined by the exception safety guarantee of T's constructor<a href="https://eel.is/c++draft/optional#assign-23.sentence-2"><span class="s39">.</span></a> If an exception is thrown during the call to T's assignment, the state of </span><span class="s14">*</span><span class="s1">val and </span><span class="s14">*</span><span class="s1">rhs</span><span class="s14">.</span><span class="s1">val is determined by the exception safety guarantee of T's assignment<a href="https://eel.is/c++draft/optional#assign-23.sentence-3"><span class="s39">.</span></a></span></p>
<p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#lib:operator=,optional_____">🔗<span class="s46"></span></a></span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s10">optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;&amp;</span><span class="s10"> rhs</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-24">24<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3825">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Constraints</i>:</span></p>
<ul class="ul1">
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-24.1"><span class="s19">(24.1)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-24.2"><span class="s19">(24.2)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, U</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-24.3"><span class="s19">(24.3)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
<i>converts-from-any-cvref</i></span><span class="s14">&lt;</span><span class="s1">T, optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-24.4"><span class="s19">(24.4)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-24.5"><span class="s19">(24.5)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&amp;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">,</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-24.6"><span class="s19">(24.6)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&gt;</span><span class="s1"> is </span><span class="s43">false</span><span class="s1">, and</span></li>
  <li class="li91"><span class="s68"><a href="https://eel.is/c++draft/optional#assign-24.7"><span class="s19">(24.7)</span></a></span><span class="s65"><br>
</span><span class="s1"><br>
is_assignable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&amp;</span><span class="s1">, </span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&amp;&gt;</span><span class="s1"> is </span><span class="s43">false<a href="https://eel.is/c++draft/optional#assign-24.sentence-1"><span class="s10">.</span></a></span></li>
</ul>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-25">25<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3837">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Effects</i>: See Table <a href="https://eel.is/c++draft/optional#tab:optional.assign.move.templ"><span class="s13">61</span></a><a href="https://eel.is/c++draft/optional#assign-25.sentence-1"><span class="s39">.</span></a> The result of the expression rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> remains unchanged<a href="https://eel.is/c++draft/optional#assign-25.sentence-2"><span class="s39">.</span></a></span></p>
<p class="p89"><span class="s1">Table <a href="https://eel.is/c++draft/optional#tab:optional.assign.move.templ"><span class="s13">61</span></a>: optional</span><span class="s14"> :: </span><span class="s15">operator</span><span class="s14">=</span><span class="s11">(</span><span class="s1">optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;&amp;</span><span class="s11">)</span><span class="s1"> effects</span><span class="s67"> <a href="https://eel.is/c++draft/tab:optional.assign.move.templ"><span class="s13">[tab:optional.assign.move.templ]</span></a></span></p>
<table cellspacing="0" cellpadding="0" class="t2">
  <tbody>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.move.templ-row-1">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td25">
        <p class="p90"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s14"><b>*</b></span><span class="s15"><b>this</b></span><span class="s1"><b> contains a value</b></span></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s14"><b>*</b></span><span class="s15"><b>this</b></span><span class="s1"><b> does not contain a value</b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.move.templ-row-2">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td28">
        <p class="p20"><span class="s1"><b>rhs contains a value</b></span></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td29">
        <p class="p20"><span class="s1">assigns std</span><span class="s14"> :: </span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s1">rhs</span><span class="s11">)</span><span class="s1"> to the contained value</span></p>
      </td>
      <td valign="top" class="td29">
        <p class="p20"><span class="s1">direct-non-list-initializes the contained value with std</span><span class="s14"> :: </span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s1">rhs</span><span class="s11">)</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.assign.move.templ-row-3">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td30">
        <p class="p20"><span class="s1"><b>rhs does not contain a value</b></span></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s1">destroys the contained value by calling val</span><span class="s14">-&gt;</span><span class="s1">T</span><span class="s14"> :: ~</span><span class="s1">T</span><span class="s11">()</span></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s1">no effect</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-26">26<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3855">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Postconditions</i>: rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()<a href="https://eel.is/c++draft/optional#assign-26.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-27">27<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3859">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Returns</i>: </span><span class="s14">*</span><span class="s15">this<a href="https://eel.is/c++draft/optional#assign-27.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-28">28<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3863">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Remarks</i>: If any exception is thrown, the result of the expression </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> remains unchanged<a href="https://eel.is/c++draft/optional#assign-28.sentence-1"><span class="s39">.</span></a> If an exception is thrown during the call to T's constructor, the state of </span><span class="s14">*</span><span class="s1">rhs</span><span class="s14">.</span><span class="s1">val is determined by the exception safety guarantee of T's constructor<a href="https://eel.is/c++draft/optional#assign-28.sentence-2"><span class="s39">.</span></a> If an exception is thrown during the call to T's assignment, the state of </span><span class="s14">*</span><span class="s1">val and </span><span class="s14">*</span><span class="s1">rhs</span><span class="s14">.</span><span class="s1">val is determined by the exception safety guarantee of T's assignment<a href="https://eel.is/c++draft/optional#assign-28.sentence-3"><span class="s39">.</span></a></span></p>
<p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#lib:emplace,optional">🔗<span class="s46"></span></a></span></p>
<p class="p46"><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s14">...</span><span class="s1"> Args</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">constexpr</span><span class="s1"> T</span><span class="s14">&amp;</span><span class="s1"> emplace</span><span class="s11">(</span><span class="s1">Args</span><span class="s14">&amp;&amp;...</span><span class="s1"> args</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-29">29<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3881">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, Args</span><span class="s14">...&gt;</span><span class="s1"> is </span><span class="s43">true<a href="https://eel.is/c++draft/optional#assign-29.sentence-1"><span class="s10">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-30">30<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3885">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Effects</i>: Calls </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> </span><span class="s14">=</span><span class="s1"> nullopt<a href="https://eel.is/c++draft/optional#assign-30.sentence-1"><span class="s39">.</span></a> Then direct-non-list-initializes the contained value with std</span><span class="s14"> :: </span><span class="s1">forward </span><span class="s14">&lt;</span><span class="s1">Args</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">args</span><span class="s11">)</span><span class="s14">...<a href="https://eel.is/c++draft/optional#assign-30.sentence-2"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-31">31<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3890">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Postconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value<a href="https://eel.is/c++draft/optional#assign-31.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-32">32<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3894">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Returns</i>: A reference to the new contained value<a href="https://eel.is/c++draft/optional#assign-32.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-33">33<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3898">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T<a href="https://eel.is/c++draft/optional#assign-33.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-34">34<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3902">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Remarks</i>: If an exception is thrown during the call to T's constructor, </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> does not contain a value, and the previous </span><span class="s14">*</span><span class="s1">val (if any) has been destroyed<a href="https://eel.is/c++draft/optional#assign-34.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#lib:emplace,optional_">🔗<span class="s46"></span></a></span></p>
<p class="p46"><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> U, </span><span class="s15">class</span><span class="s14">...</span><span class="s1"> Args</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">constexpr</span><span class="s1"> T</span><span class="s14">&amp;</span><span class="s1"> emplace</span><span class="s11">(</span><span class="s1">initializer_list</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s1"> il, Args</span><span class="s14">&amp;&amp;...</span><span class="s1"> args</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-35">35<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3913">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Constraints</i>: is_constructible_v</span><span class="s14">&lt;</span><span class="s1">T, initializer_list</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;</span><span class="s1">, Args</span><span class="s14">...&gt;</span><span class="s1"> is </span><span class="s43">true<a href="https://eel.is/c++draft/optional#assign-35.sentence-1"><span class="s10">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-36">36<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3917">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Effects</i>: Calls </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> </span><span class="s14">=</span><span class="s1"> nullopt<a href="https://eel.is/c++draft/optional#assign-36.sentence-1"><span class="s39">.</span></a> Then direct-non-list-initializes the contained value with il, std</span><span class="s14"> :: </span><span class="s1">forward</span><span class="s14">&lt;</span><span class="s1">Args</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">args</span><span class="s11">)</span><span class="s14">...<a href="https://eel.is/c++draft/optional#assign-36.sentence-2"><span class="s47">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-37">37<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3922">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Postconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value<a href="https://eel.is/c++draft/optional#assign-37.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-38">38<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3926">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Returns</i>: A reference to the new contained value<a href="https://eel.is/c++draft/optional#assign-38.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-39">39<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3930">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Throws</i>: Any exception thrown by the selected constructor of T<a href="https://eel.is/c++draft/optional#assign-39.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#assign-40">40<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3934">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Remarks</i>: If an exception is thrown during the call to T's constructor, </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> does not contain a value, and the previous </span><span class="s14">*</span><span class="s1">val (if any) has been destroyed<a href="https://eel.is/c++draft/optional#assign-40.sentence-1"><span class="s39">.</span></a></span></p>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9"><span class="s1"><a href="https://eel.is/c++draft/optional#swap"><b>22.5.3.5</b></a></span><span class="s10"><b> Swap</b></span></h4>
<p class="p48"><span class="s40"><a href="https://eel.is/c++draft/optional.swap"><b>[optional.swap]</b><span class="s66"><b></b></span></a></span></p>
<p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#lib:swap,optional">🔗<span class="s46"></span></a></span></p>
<p class="p46"><span class="s15">constexpr</span><span class="s1"> </span><span class="s15">void</span><span class="s1"> swap</span><span class="s11">(</span><span class="s1">optional</span><span class="s14">&amp;</span><span class="s1"> rhs</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s11">(</span><span class="s1"><i>see below</i></span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#swap-1">1<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3947">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: is_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true<a href="https://eel.is/c++draft/optional#swap-1.sentence-1"><span class="s10">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#swap-2">2<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3951">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Preconditions</i>: T meets the <i>Cpp17Swappable</i> requirements (<a href="https://eel.is/c++draft/swappable.requirements"><span class="s13">[swappable.requirements]</span></a>)<a href="https://eel.is/c++draft/optional#swap-2.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#swap-3">3<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3955">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Effects</i>: See Table <a href="https://eel.is/c++draft/optional#tab:optional.swap"><span class="s13">62</span></a><a href="https://eel.is/c++draft/optional#swap-3.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p89"><span class="s1">Table <a href="https://eel.is/c++draft/optional#tab:optional.swap"><span class="s13">62</span></a>: optional</span><span class="s14"> :: </span><span class="s1">swap</span><span class="s11">(</span><span class="s1">optional</span><span class="s14">&amp;</span><span class="s11">)</span><span class="s1"> effects</span><span class="s67"> <a href="https://eel.is/c++draft/tab:optional.swap"><span class="s13">[tab:optional.swap]</span></a></span></p>
<table cellspacing="0" cellpadding="0" class="t2">
  <tbody>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.swap-row-1">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td25">
        <p class="p90"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s14"><b>*</b></span><span class="s15"><b>this</b></span><span class="s1"><b> contains a value</b></span></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s14"><b>*</b></span><span class="s15"><b>this</b></span><span class="s1"><b> does not contain a value</b></span></p>
      </td>
    </tr>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.swap-row-2">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td28">
        <p class="p20"><span class="s1"><b>rhs contains a value</b></span></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td29">
        <p class="p20"><span class="s1">calls swap</span><span class="s11">(</span><span class="s14">*</span><span class="s11">(</span><span class="s14">*</span><span class="s15">this</span><span class="s11">)</span><span class="s1">, </span><span class="s14">*</span><span class="s1">rhs</span><span class="s11">)</span></p>
      </td>
      <td valign="top" class="td29">
        <p class="p20"><span class="s1">direct-non-list-initializes the contained value of </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> with std</span><span class="s14"> :: </span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s1">rhs</span><span class="s11">)</span><span class="s1">, followed by rhs</span><span class="s14">.</span><span class="s1">val</span><span class="s14">-&gt;</span><span class="s1">T</span><span class="s14"> :: ~</span><span class="s1">T</span><span class="s11">()</span><span class="s1">; postcondition is that </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value and rhs does not contain a value</span></p>
      </td>
    </tr>
    <tr>
      <td valign="top">
        <p class="p72"><span class="s1"><a href="https://eel.is/c++draft/optional#tab:optional.swap-row-3">🔗<span class="s46"></span></a></span></p>
      </td>
      <td valign="top" class="td30">
        <p class="p20"><span class="s1"><b>rhs does not contain a value</b></span></p>
      </td>
      <td valign="top" class="td26">
        <p class="p47"><span class="s1"></span><br></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s1">direct-non-list-initializes the contained value of rhs with std</span><span class="s14"> :: </span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s11">(</span><span class="s14">*</span><span class="s15">this</span><span class="s11">))</span><span class="s1">, followed by val</span><span class="s14">-&gt;</span><span class="s1">T</span><span class="s14"> :: ~</span><span class="s1">T</span><span class="s11">()</span><span class="s1">; postcondition is that </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> does not contain a value and rhs contains a value</span></p>
      </td>
      <td valign="top" class="td27">
        <p class="p20"><span class="s1">no effect</span></p>
      </td>
    </tr>
  </tbody>
</table>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#swap-4">4<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3978">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Throws</i>: Any exceptions thrown by the operations in the relevant part of Table <a href="https://eel.is/c++draft/optional#tab:optional.swap"><span class="s13">62</span></a><a href="https://eel.is/c++draft/optional#swap-4.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#swap-5">5<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3982">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1"><i>Remarks</i>: The exception specification is equivalent to:</span></p>
<p class="p46"><span class="s1">is_nothrow_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1"> is_nothrow_swappable_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span></p>
<p class="p88"><span class="s1"><a href="https://eel.is/c++draft/optional#swap-6">6<span class="s65"></span></a></span></p>
<p class="p48"><span class="s40"><a href="http://github.com/Eelis/draft/tree/7faaaf22a11d54ad00e40cc8d7fbee90db8b0837/source/utilities.tex#L3989">#<span class="s66"></span></a></span></p>
<p class="p85"><span class="s1">If any exception is thrown, the results of the expressions </span><span class="s15">this</span><span class="s14">-&gt;</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> and rhs</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> remain unchanged<a href="https://eel.is/c++draft/optional#swap-6.sentence-1"><span class="s39">.</span></a> If an exception is thrown during the call to function swap, the state of </span><span class="s14">*</span><span class="s1">val and </span><span class="s14">*</span><span class="s1">rhs</span><span class="s14">.</span><span class="s1">val is determined by the exception safety guarantee of swap for lvalues of T<a href="https://eel.is/c++draft/optional#swap-6.sentence-2"><span class="s39">.</span></a> If an exception is thrown during the call to T's move constructor, the state of </span><span class="s14">*</span><span class="s1">val and </span><span class="s14">*</span><span class="s1">rhs</span><span class="s14">.</span><span class="s1">val is determined by the exception safety guarantee of T's move constructor<a href="https://eel.is/c++draft/optional#swap-6.sentence-3"><span class="s39">.</span></a></span></p>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; min-height: 16.0px"><span class="s1"><b></b></span><br></h4>
<p class="p75"><span class="s1"></span><br></p>
<p class="p92"><span class="s1"><b>22.5.x.6 Allocator [</b></span><span class="s69"><b>basic.optional.al]</b></span></p>
<p class="p93"><span class="s1">allocator_type get_allocator</span><span class="s48">()</span><span class="s1"> </span><span class="s70">const</span><span class="s1">;</span></p>
<p class="p94"><span class="s1"><i>Returns</i>: A copy of the Allocator that was passed to the object's constructor or, if that allocator has been replaced, a copy of the most recent replacement.</span></p>
<p class="p87"><span class="s1"><b></b></span><br></p>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; background-color: #21ff06"><span class="s1"><b>22.5.x.7</b></span><span class="s10"><b> Observers</b></span><span class="s1"><b> [basic.optional.observe]</b></span></h4>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> T</span><span class="s14">*</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">-&gt;</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> T</span><span class="s14">*</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">-&gt;</span><span class="s11">()</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p66"><span class="s1"><i>Preconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value</span></p>
<p class="p66"><span class="s1"><i>Returns</i>: val.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: These functions are constexpr functions<a href="https://eel.is/c++draft/optional#observe-3.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p70"><span class="s1"></span><br></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">*</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">*</span><span class="s11">()</span><span class="s10"> </span><span class="s14">&amp;</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p66"><span class="s1"><i>Preconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value.</span></p>
<p class="p66"><span class="s1"><i>Returns</i>: </span><span class="s14">*</span><span class="s1">val.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: These functions are constexpr functions.</span></p>
<p class="p95"><span class="s1"></span><br></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> T</span><span class="s14">&amp;&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">*</span><span class="s11">()</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;&amp;</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">*</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p66"><span class="s1"><i>Preconditions</i>: </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value.</span></p>
<p class="p66"><span class="s1"><i>Effects</i>: Equivalent to: </span><span class="s15">return</span><span class="s1"> std</span><span class="s14"> :: </span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s1">val</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">explicit</span><span class="s10"> </span><span class="s1">operator</span><span class="s10"> </span><span class="s1">bool</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p66"><span class="s1"><i>Returns</i>: </span><span class="s43">true</span><span class="s1"> if and only if </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: This function is a constexpr function<a href="https://eel.is/c++draft/optional#observe-10.sentence-1"><span class="s39">.</span></a></span></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> has_value</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p66"><span class="s1"><i>Returns</i>: </span><span class="s43">true</span><span class="s1"> if and only if </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value.</span></p>
<p class="p66"><span class="s1"><i>Remarks</i>: This function is a constexpr function.</span></p>
<p class="p95"><span class="s1"></span><br></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> value</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s14">&amp;</span><span class="s10">;</span></p>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> T</span><span class="s14">&amp;</span><span class="s1"> value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">&amp;</span><span class="s1">;</span></p>
<p class="p66"><span class="s1"><i>Effects</i>: Equivalent to:</span></p>
<p class="p69"><span class="s15"><span class="Apple-tab-span">	</span>return</span><span class="s1"> has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">?</span><span class="s1"> </span><span class="s14">*</span><span class="s1">val </span><span class="s14">:</span><span class="s1"> </span><span class="s15">throw</span><span class="s1"> bad_optional_access</span><span class="s11">()</span><span class="s1">;</span></p>
<p class="p70"><span class="s1"></span><br></p>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> T</span><span class="s14">&amp;&amp;</span><span class="s1"> value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1">;</span></p>
<p class="p68"><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;&amp;</span><span class="s10"> value</span><span class="s11">()</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10">;</span></p>
<p class="p66"><span class="s7"><span class="Apple-tab-span">	</span></span><span class="s1"><i>Effects</i>: Equivalent to:</span></p>
<p class="p69"><span class="s15">return</span><span class="s1"> has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">?</span><span class="s1"> std</span><span class="s14">::</span><span class="s1">move</span><span class="s11">(</span><span class="s14">*</span><span class="s1">val</span><span class="s11">)</span><span class="s1"> </span><span class="s14">:</span><span class="s1"> </span><span class="s15">throw</span><span class="s1"> bad_optional_access</span><span class="s11">()</span><span class="s1">;</span></p>
<p class="p70"><span class="s1"></span><br></p>
<p class="p68"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> T value_or</span><span class="s11">(</span><span class="s10">U</span><span class="s14">&amp;&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10"> </span><span class="s1">const</span><span class="s10"> </span><span class="s14">&amp;</span><span class="s10">;</span></p>
<p class="p66"><span class="s1"><i>Mandates</i>: is_copy_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1"> is_convertible_v</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&amp;&amp;</span><span class="s1">, T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span></p>
<p class="p66"><span class="s1"><i>Effects</i>: Equivalent to:</span></p>
<p class="p69"><span class="s15">return</span><span class="s1"> has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">?</span><span class="s1"> </span><span class="s14">**</span><span class="s15">this</span><span class="s1"> </span><span class="s14">:</span><span class="s1"> </span><span class="s15">static_cast</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">std</span><span class="s14">::</span><span class="s1">forward</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">v</span><span class="s11">))</span><span class="s1">;</span></p>
<p class="p96"><span class="s1"></span><br></p>
<p class="p68"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> T value_or</span><span class="s11">(</span><span class="s10">U</span><span class="s14">&amp;&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10">;</span></p>
<p class="p66"><span class="s1"><i>Mandates</i>: is_move_constructible_v</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">&amp;&amp;</span><span class="s1"> is_convertible_v</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&amp;&amp;</span><span class="s1">, T</span><span class="s14">&gt;</span><span class="s1"> is </span><span class="s43">true</span><span class="s1">.</span></p>
<p class="p66"><span class="s1"><i>Effects</i>: Equivalent to:</span></p>
<p class="p46"><span class="s18">return</span><span class="s17"> has_value</span><span class="s21">()</span><span class="s17"> </span><span class="s20">?</span><span class="s17"> std</span><span class="s20">::</span><span class="s17">move</span><span class="s21">(</span><span class="s20">**</span><span class="s18">this</span><span class="s21">)</span><span class="s17"> </span><span class="s20">:</span><span class="s17"> </span><span class="s18">static_cast</span><span class="s20">&lt;</span><span class="s17">T</span><span class="s20">&gt;</span><span class="s21">(</span><span class="s17">std</span><span class="s20">::</span><span class="s17">forward</span><span class="s20">&lt;</span><span class="s17">U</span><span class="s20">&gt;</span><span class="s21">(</span><span class="s17">v</span><span class="s21">))</span><span class="s17">;</span></p>
<p class="p47"><span class="s1"></span><br></p>
<h4 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 13.3px Times; color: #0000e9; -webkit-text-stroke: #0000e9; background-color: #21ff06"><span class="s1"><b>22.5.x.8</b></span><span class="s10"><b> Modifiers</b></span><span class="s1"><b> [basic.optional.mod]</b></span></h4>
<h4 style="margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Times; color: #0a4d69; -webkit-text-stroke: #0a4d69; background-color: #21ff06"><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">void</span><span class="s10"> reset</span><span class="s11">()</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></h4>
<h4 style="margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 13.3px Times; -webkit-text-stroke: #000000; background-color: #21ff06"><span class="s1"><i>Effects</i>: If </span><span class="s14">*</span><span class="s15">this</span><span class="s1"> contains a value, calls val</span><span class="s14">-&gt;</span><span class="s1">T</span><span class="s14"> :: ~</span><span class="s1">T</span><span class="s11">()</span><span class="s1"> to destroy the contained value; otherwise no effect.</span></h4>
<p class="p85"><span class="s17"><i>Postconditions</i>: </span><span class="s20">*</span><span class="s18">this</span><span class="s17"> does not contain a value.</span></p>
<p class="p42"><span class="s1"><b></b></span><br></p>
<p class="p97"><span class="s1"><b>Modify 22.5.6</b></span><span class="s10"><b> Relational operators</b></span><span class="s1"><b> </b><a href="https://eel.is/c++draft/optional.relops"><span class="s71"><b>[optional.relops]</b></span></a></span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> y</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p46"><span class="s18">template</span><span class="s20">&lt;</span><span class="s18">class</span><span class="s17"> T, </span><span class="s24">AllocatorT , </span><span class="s18">class</span><span class="s17"> U, AllocatorU</span><span class="s20">&gt;</span><span class="s17"> </span><span class="s18">constexpr</span><span class="s17"> </span><span class="s18">bool</span><span class="s17"> </span><span class="s18">operator</span><span class="s20">==</span><span class="s21">(</span><span class="s18">const</span><span class="s17"> basic_optional</span><span class="s20">&lt;</span><span class="s17">T, AllocatorT</span><span class="s20">&gt;&amp;</span><span class="s17"> x, </span><span class="s18">const</span><span class="s17"> basic_optional</span><span class="s20">&lt;</span><span class="s17">U, AllocatorU</span><span class="s20">&gt;&amp;</span><span class="s17"> y</span><span class="s21">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">==</span><span class="s1"> </span><span class="s14">*</span><span class="s1">y is well-formed and its result is convertible to </span><span class="s15">bool<a href="https://eel.is/c++draft/optional#relops-1.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p98"><span class="s1">…</span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> y</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p46"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, AllocatorT , </span><span class="s54">class</span><span class="s17"> U, AllocatorU</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">!=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, AllocatorT</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, AllocatorU</span><span class="s57">&gt;&amp;</span><span class="s17"> y</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">!=</span><span class="s1"> </span><span class="s14">*</span><span class="s1">y is well-formed and its result is convertible to </span><span class="s15">bool</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> y</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p46"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, AllocatorT , </span><span class="s54">class</span><span class="s17"> U, AllocatorU</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&lt;</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, AllocatorT</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, AllocatorU</span><span class="s57">&gt;&amp;</span><span class="s17"> y</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&lt;</span><span class="s1"> </span><span class="s14">*</span><span class="s1">y is well-formed and its result is convertible to </span><span class="s15">bool</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p79"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> y</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, AllocatorT , </span><span class="s54">class</span><span class="s17"> U, AllocatorU</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&gt;</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, AllocatorT</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, AllocatorU</span><span class="s57">&gt;&amp;</span><span class="s17"> y</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">*</span><span class="s1">y is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> y</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, AllocatorT , </span><span class="s54">class</span><span class="s17"> U, AllocatorU</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&lt;=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, AllocatorT</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, AllocatorU</span><span class="s57">&gt;&amp;</span><span class="s17"> y</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&lt;=</span><span class="s1"> </span><span class="s14">*</span><span class="s1">y is well-formed and its result is convertible to </span><span class="s15">bool<a href="https://eel.is/c++draft/optional#relops-13.sentence-1"><span class="s47">.</span></a></span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> y</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, AllocatorT , </span><span class="s54">class</span><span class="s17"> U, AllocatorU</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&gt;=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, AllocatorT</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, AllocatorU</span><span class="s57">&gt;&amp;</span><span class="s17"> y</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p46"><span class="s1">…</span></p>
<p class="p47"><span class="s1"></span><br></p>
<p class="p99"><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s10"> T, <a href="https://eel.is/c++draft/cmp.concept#concept:three_way_comparable_with"><span class="s19">three_way_comparable_with</span></a></span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">constexpr</span><span class="s1"> compare_three_way_result_t</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">operator</span><span class="s14">&lt;=&gt;</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&amp;</span><span class="s1"> x, </span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">U</span><span class="s14">&gt;&amp;</span><span class="s1"> y</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p73"><span class="s23">template</span><span class="s53">&lt;</span><span class="s23">class</span><span class="s1"> T, AllocatorT , <a href="https://eel.is/c++draft/cmp.concept#concept:three_way_comparable_with"><span class="s9">three_way_comparable_with</span></a></span><span class="s14">&lt;</span><span class="s22">T</span><span class="s14">&gt;</span><span class="s22"> U</span><span class="s1"> AllocatorU</span><span class="s53">&gt;</span><span class="s1"><span class="Apple-converted-space"> </span></span><span class="s22"> <span class="Apple-converted-space"> </span></span></p>
<p class="p69"><span class="s15">constexpr</span><span class="s1"> compare_three_way_result_t</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span></p>
<p class="p57"><span class="s24"><span class="Apple-converted-space">    </span></span><span class="s18">operator</span><span class="s20">&lt;=&gt;</span><span class="s21">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, AllocatorT</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, AllocatorU</span><span class="s57">&gt;&amp;</span><span class="s17"> y</span><span class="s21">)</span><span class="s24">;</span></p>
<p class="p85"><span class="s1"><i>Returns</i>: If x </span><span class="s14">&amp;&amp;</span><span class="s1"> y, </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&lt;=&gt;</span><span class="s1"> </span><span class="s14">*</span><span class="s1">y; otherwise x</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">&lt;=&gt;</span><span class="s1"> y</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span></p>
<p class="p64"><span class="s1"></span><br></p>
<h3 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 15.6px Times; -webkit-text-stroke: #000000"><span class="s9"><b>Modify </b><a href="https://eel.is/c++draft/optional#nullops"><span class="s72"><b>22.5.7</b></span></a></span><span class="s1"><b> Comparison with nullopt</b></span></h3>
<p class="p101"><span class="s1"><a href="https://eel.is/c++draft/optional.nullops"><b>[optional.nullops]</b><span class="s71"><b></b></span></a></span></p>
<p class="p78"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, nullopt_t</span><span class="s11">)</span><span class="s10"> </span><span class="s1">noexcept</span><span class="s10">;</span></p>
<p class="p46"><span class="s18">template</span><span class="s20">&lt;</span><span class="s18">class</span><span class="s17"> T, class Allocator</span><span class="s20">&gt;</span><span class="s17"> </span><span class="s18">constexpr</span><span class="s17"> </span><span class="s18">bool</span><span class="s17"> </span><span class="s18">operator</span><span class="s20">==</span><span class="s21">(</span><span class="s18">const</span><span class="s17"> basic_optional</span><span class="s20">&lt;</span><span class="s17">T, Allocator</span><span class="s20">&gt;&amp;</span><span class="s17"> x, nullopt_t</span><span class="s21">)</span><span class="s17"> </span><span class="s18">noexcept</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Returns</i>: </span><span class="s14">!</span><span class="s1">x.</span></p>
<p class="p76"><span class="s1"></span><br></p>
<p class="p46"><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> T</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">constexpr</span><span class="s1"> strong_ordering </span><span class="s15">operator</span><span class="s14">&lt;=&gt;</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&amp;</span><span class="s1"> x, nullopt_t</span><span class="s11">)</span><span class="s1"> </span><span class="s15">noexcept</span><span class="s1">;</span></p>
<p class="p73"><span class="s23">template</span><span class="s53">&lt;</span><span class="s23">class</span><span class="s1"> T, class Allocator</span><span class="s53">&gt;</span><span class="s1"> </span><span class="s23">constexpr</span><span class="s1"> </span><span class="s22">strong_ordering</span><span class="s1"> </span><span class="s23">operator&lt;</span><span class="s53">==&gt;</span><span class="s52">(</span><span class="s23">const</span><span class="s1"> basic_optional</span><span class="s53">&lt;</span><span class="s1">T, Allocator</span><span class="s53">&gt;&amp;</span><span class="s1"> x, nullopt_t</span><span class="s52">)</span><span class="s1"> </span><span class="s23">noexcept</span><span class="s1">;</span></p>
<p class="p85"><span class="s1"><i>Returns</i>: x</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">&lt;=&gt;</span><span class="s1"> </span><span class="s43">false</span></p>
<p class="p64"><span class="s1"></span><br></p>
<h3 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 15.6px Times; color: #0000e9; -webkit-text-stroke: #0000e9"><span class="s1"><b>Modify </b><a href="https://eel.is/c++draft/optional#comp.with.t"><span class="s71"><b>22.5.8</b></span></a></span><span class="s10"><b> Comparison with T</b></span><span class="s1"><b> </b><a href="https://eel.is/c++draft/optional.comp.with.t"><span class="s71"><b>[optional.comp.with.t]</b></span></a></span></h3>
<p class="p78"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p46"><span class="s18">template</span><span class="s20">&lt;</span><span class="s18">class</span><span class="s17"> T, class Allocator, </span><span class="s18">class</span><span class="s17"> U</span><span class="s20">&gt;</span><span class="s17"> </span><span class="s18">constexpr</span><span class="s17"> </span><span class="s18">bool</span><span class="s17"> </span><span class="s18">operator</span><span class="s20">==</span><span class="s21">(</span><span class="s18">const</span><span class="s17"> basic_optional</span><span class="s20">&lt;</span><span class="s17">T, Allocator</span><span class="s20">&gt;&amp;</span><span class="s17"> x, </span><span class="s18">const</span><span class="s17"> U</span><span class="s20">&amp;</span><span class="s17"> v</span><span class="s21">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">==</span><span class="s1"> v is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s7">.</span></p>
<p class="p46"><span class="s1">…</span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">==</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> v, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> x</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, </span><span class="s54">class</span><span class="s17"> U, class Allocator,</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">==</span><span class="s55">(</span><span class="s18">const</span><span class="s24"> T</span><span class="s20">&amp;</span><span class="s24"> v, </span><span class="s18">const</span><span class="s24"> basic_optional</span><span class="s20">&lt;</span><span class="s24">U, Allocator</span><span class="s20">&gt;&amp;</span><span class="s24"> x</span><span class="s21">)</span><span class="s24">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression v </span><span class="s14">==</span><span class="s1"> </span><span class="s14">*</span><span class="s1">x is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p79"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, class Allocator, </span><span class="s54">class</span><span class="s17"> U</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">!=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> U</span><span class="s57">&amp;</span><span class="s17"> v</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">!=</span><span class="s1"> v is well-formed and its result is convertible to </span><span class="s15">bool</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p76"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">!=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> v, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> x</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">emplate</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, </span><span class="s54">class</span><span class="s17"> U, class Allocator,</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">!=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> T</span><span class="s57">&amp;</span><span class="s17"> v, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression v </span><span class="s14">!=</span><span class="s1"> </span><span class="s14">*</span><span class="s1">x is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, class Allocator, </span><span class="s54">class</span><span class="s17"> U</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&lt;</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> U</span><span class="s57">&amp;</span><span class="s17"> v</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&lt;</span><span class="s1"> v is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p79"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> v, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> x</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, </span><span class="s54">class</span><span class="s17"> U, class Allocator,</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operato&lt;</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> T</span><span class="s57">&amp;</span><span class="s17"> v, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression v </span><span class="s14">&lt;</span><span class="s1"> </span><span class="s14">*</span><span class="s1">x is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, class Allocator, </span><span class="s54">class</span><span class="s17"> U</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&gt;</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> U</span><span class="s57">&amp;</span><span class="s17"> v</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&gt;</span><span class="s1"> v is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> v, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> x</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, </span><span class="s54">class</span><span class="s17"> U, class Allocator,</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&gt;</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> T</span><span class="s57">&amp;</span><span class="s17"> v, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression v </span><span class="s14">&gt;</span><span class="s1"> </span><span class="s14">*</span><span class="s1">x is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p79"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, class Allocator, </span><span class="s54">class</span><span class="s17"> U</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&lt;=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> U</span><span class="s57">&amp;</span><span class="s17"> v</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&lt;=</span><span class="s1"> v is well-formed and its result is convertible to </span><span class="s15">bool</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&lt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> v, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> x</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, </span><span class="s54">class</span><span class="s17"> U, class Allocator,</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&lt;=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> T</span><span class="s57">&amp;</span><span class="s17"> v, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression v </span><span class="s14">&lt;=</span><span class="s1"> </span><span class="s14">*</span><span class="s1">x is well-formed and its result is convertible to </span><span class="s15">bool</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&amp;</span><span class="s10"> x, </span><span class="s1">const</span><span class="s10"> U</span><span class="s14">&amp;</span><span class="s10"> v</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, class Allocator, </span><span class="s54">class</span><span class="s17"> U</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&gt;=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">T, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x, </span><span class="s54">const</span><span class="s17"> U</span><span class="s57">&amp;</span><span class="s17"> v</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&gt;=</span><span class="s1"> v is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">constexpr</span><span class="s10"> </span><span class="s1">bool</span><span class="s10"> </span><span class="s1">operator</span><span class="s14">&gt;=</span><span class="s11">(</span><span class="s1">const</span><span class="s10"> T</span><span class="s14">&amp;</span><span class="s10"> v, </span><span class="s1">const</span><span class="s10"> optional</span><span class="s14">&lt;</span><span class="s10">U</span><span class="s14">&gt;&amp;</span><span class="s10"> x</span><span class="s11">)</span><span class="s10">;</span></p>
<p class="p57"><span class="s54">template</span><span class="s57">&lt;</span><span class="s54">class</span><span class="s17"> T, </span><span class="s54">class</span><span class="s17"> U, class Allocator,</span><span class="s57">&gt;</span><span class="s17"> </span><span class="s54">constexpr</span><span class="s17"> </span><span class="s54">bool</span><span class="s17"> </span><span class="s54">operator</span><span class="s57">&gt;=</span><span class="s55">(</span><span class="s54">const</span><span class="s17"> T</span><span class="s57">&amp;</span><span class="s17"> v, </span><span class="s54">const</span><span class="s17"> basic_optional</span><span class="s57">&lt;</span><span class="s17">U, Allocator</span><span class="s57">&gt;&amp;</span><span class="s17"> x</span><span class="s55">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Mandates</i>: The expression v </span><span class="s14">&gt;=</span><span class="s1"> </span><span class="s14">*</span><span class="s1">x is well-formed and its result is convertible to </span><span class="s15">bool</span><span class="s1">.</span></p>
<p class="p85"><span class="s1">…</span></p>
<p class="p79"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T, </span><span class="s1">class</span><span class="s10"> U</span><span class="s14">&gt;</span></p>
<p class="p99"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s15">requires</span><span class="s10"> </span><span class="s11">(</span><span class="s14">!<a href="https://eel.is/c++draft/optional#concept:is-derived-from-optional"><span class="s9"><i>is-derived-from-optional</i></span></a>&lt;</span><span class="s10">U</span><span class="s14">&gt;</span><span class="s11">)</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10"> <a href="https://eel.is/c++draft/cmp.concept#concept:three_way_comparable_with"><span class="s19">three_way_comparable_with</span></a></span><span class="s14">&lt;</span><span class="s10">T, U</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">constexpr</span><span class="s1"> compare_three_way_result_t</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s15">operator</span><span class="s14">&lt;=&gt;</span><span class="s11">(</span><span class="s15">const</span><span class="s1"> optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&amp;</span><span class="s1"> x, </span><span class="s15">const</span><span class="s1"> U</span><span class="s14">&amp;</span><span class="s1"> v</span><span class="s11">)</span><span class="s1">;</span></p>
<p class="p69"><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> T, class Allocator, </span><span class="s15">class</span><span class="s1"> U</span><span class="s14">&gt;</span></p>
<p class="p103"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s15">requires</span><span class="s10"> </span><span class="s11">(</span><span class="s14">!<a href="https://eel.is/c++draft/optional#concept:is-derived-from-optional"><span class="s9"><i>is-derived-from-optional</i></span></a>&lt;</span><span class="s10">U</span><span class="s14">&gt;</span><span class="s11">)</span><span class="s10"> </span><span class="s14">&amp;&amp;</span><span class="s10"> <a href="https://eel.is/c++draft/cmp.concept#concept:three_way_comparable_with"><span class="s19">three_way_comparable_with</span></a></span><span class="s14">&lt;</span><span class="s10">T, U</span><span class="s14">&gt;</span></p>
<p class="p69"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s15">constexpr</span><span class="s1"> compare_three_way_result_t</span><span class="s14">&lt;</span><span class="s1">T, U</span><span class="s14">&gt;</span></p>
<p class="p46"><span class="s17"><span class="Apple-converted-space">    </span></span><span class="s18">operator</span><span class="s20">&lt;=&gt;</span><span class="s21">(</span><span class="s18">const</span><span class="s17"> optional</span><span class="s20">&lt;</span><span class="s17">T, Allocator</span><span class="s20">&gt;&amp;</span><span class="s17"> x, </span><span class="s18">const</span><span class="s17"> U</span><span class="s20">&amp;</span><span class="s17"> v</span><span class="s21">)</span><span class="s17">;</span></p>
<p class="p85"><span class="s1"><i>Effects</i>: Equivalent to: </span><span class="s15">return</span><span class="s1"> x</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">?</span><span class="s1"> </span><span class="s14">*</span><span class="s1">x </span><span class="s14">&lt;=&gt;</span><span class="s1"> v </span><span class="s14">:</span><span class="s1"> strong_ordering</span><span class="s14"> :: </span><span class="s1">less;</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p64"><span class="s1"></span><br></p>
<h3 style="margin: 0.0px 0.0px 13.3px 0.0px; text-align: justify; font: 15.6px Times; color: #0000e9; -webkit-text-stroke: #0000e9"><span class="s1"><b>Modify </b><a href="https://eel.is/c++draft/optional#hash"><span class="s71"><b>22.5.10</b></span></a></span><span class="s10"><b> Hash support</b></span><span class="s1"><b> </b><a href="https://eel.is/c++draft/optional.hash"><span class="s71"><b>[optional.hash]</b></span></a></span></h3>
<p class="p78"><span class="s1"></span><br></p>
<p class="p45"><span class="s1">template</span><span class="s14">&lt;</span><span class="s1">class</span><span class="s10"> T</span><span class="s14">&gt;</span><span class="s10"> </span><span class="s1">struct</span><span class="s10"> hash</span><span class="s14">&lt;</span><span class="s10">optional</span><span class="s14">&lt;</span><span class="s10">T</span><span class="s14">&gt;&gt;</span><span class="s10">;</span></p>
<p class="p85"><span class="s1">The specialization hash</span><span class="s14">&lt;</span><span class="s1">optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&gt;</span><span class="s1"> is enabled (<a href="https://eel.is/c++draft/unord.hash"><span class="s13">[unord.hash]</span></a>) if and only if hash</span><span class="s14">&lt;</span><span class="s1">remove_const_t</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&gt;</span><span class="s1"> is enabled<a href="https://eel.is/c++draft/optional#hash-1.sentence-1"><span class="s39">.</span></a> When enabled, for an object o of type optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;</span><span class="s1">, if o</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s43">true</span><span class="s1">, then hash</span><span class="s14">&lt;</span><span class="s1">optional</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&gt;</span><span class="s11">()(</span><span class="s1">o</span><span class="s11">)</span><span class="s1"> evaluates to the same value as hash</span><span class="s14">&lt;</span><span class="s1">remove_const_t</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&gt;</span><span class="s11">()(</span><span class="s14">*</span><span class="s1">o</span><span class="s11">)</span><span class="s1">; otherwise it evaluates to an unspecified value<a href="https://eel.is/c++draft/optional#hash-1.sentence-2"><span class="s39">.</span></a> The member functions are not guaranteed to be </span><span class="s15">noexcept</span><span class="s1">.</span></p>
<p class="p64"><span class="s1"></span><br></p>
<p class="p22"><span class="s15">template</span><span class="s14">&lt;</span><span class="s15">class</span><span class="s1"> T</span><span class="s22">, class Allocator</span><span class="s14">&gt;</span><span class="s1"> </span><span class="s15">struct</span><span class="s1"> hash</span><span class="s14">&lt;basic_</span><span class="s1">optional</span><span class="s14">&lt;</span><span class="s1">T, Allocator</span><span class="s14">&gt;&gt;</span><span class="s1">;</span></p>
<p class="p104"><span class="s1">The specialization hash</span><span class="s14">&lt;</span><span class="s73">basic_</span><span class="s74">optional</span><span class="s73">&lt;</span><span class="s74">T, Allocator</span><span class="s73">&gt;</span><span class="s14">&gt;</span><span class="s1"> is enabled (<a href="https://eel.is/c++draft/unord.hash"><span class="s13">[unord.hash]</span></a>) if and only if hash</span><span class="s14">&lt;</span><span class="s1">remove_const_t</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&gt;</span><span class="s1"> is enabled<a href="https://eel.is/c++draft/optional#hash-1.sentence-1"><span class="s39">.</span></a> When enabled, for an object o of type </span><span class="s73">basic_</span><span class="s74">optional</span><span class="s73">&lt;</span><span class="s74">T, Allocator</span><span class="s73">&gt;</span><span class="s1">, if o</span><span class="s14">.</span><span class="s1">has_value</span><span class="s11">()</span><span class="s1"> </span><span class="s14">==</span><span class="s1"> </span><span class="s43">true</span><span class="s1">, then hash</span><span class="s14">&lt;</span><span class="s73">basic_</span><span class="s74">optional</span><span class="s73">&lt;</span><span class="s74">T, Allocator</span><span class="s73">&gt;</span><span class="s14">&gt;</span><span class="s11">()(</span><span class="s1">o</span><span class="s11">)</span><span class="s1"> evaluates to the same value as hash</span><span class="s14">&lt;</span><span class="s1">remove_const_t</span><span class="s14">&lt;</span><span class="s1">T</span><span class="s14">&gt;&gt;</span><span class="s11">()(</span><span class="s14">*</span><span class="s1">o</span><span class="s11">)</span><span class="s1">; otherwise it evaluates to an unspecified value<a href="https://eel.is/c++draft/optional#hash-1.sentence-2"><span class="s39">.</span></a> The member functions are not guaranteed to be </span><span class="s15">noexcept</span><span class="s1">.</span></p>
<p class="p37"><span class="s1"><i></i></span><br></p>
</body>
</html>
